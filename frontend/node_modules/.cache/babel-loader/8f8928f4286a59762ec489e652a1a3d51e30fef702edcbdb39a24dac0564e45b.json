{"ast":null,"code":"var _jsxFileName = \"C:\\\\HCK\\\\FYP\\\\inventory-management-system\\\\frontend\\\\src\\\\pages\\\\sales\\\\Sales.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Box, Grid, Typography, Paper, Card, CardContent, Button, TextField, MenuItem, InputAdornment, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, TablePagination, Chip, Tooltip, IconButton, Dialog, DialogTitle, DialogContent, DialogActions, CircularProgress, Alert, Snackbar, Divider, alpha, useTheme, FormControl, InputLabel, Select } from '@mui/material';\nimport SearchIcon from '@mui/icons-material/Search';\nimport FilterListIcon from '@mui/icons-material/FilterList';\nimport PointOfSaleIcon from '@mui/icons-material/PointOfSale';\nimport ReceiptIcon from '@mui/icons-material/Receipt';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport AddIcon from '@mui/icons-material/Add';\nimport FileDownloadIcon from '@mui/icons-material/FileDownload';\nimport RefreshIcon from '@mui/icons-material/Refresh';\nimport CalendarTodayIcon from '@mui/icons-material/CalendarToday';\nimport CloseIcon from '@mui/icons-material/Close';\nimport MainLayout from '../../components/layout/MainLayout';\nimport { useAuth } from '../../contexts/AuthContext';\nimport api from '../../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Sales = () => {\n  _s();\n  var _products$find, _products$find2;\n  const navigate = useNavigate();\n  const {\n    isAdmin\n  } = useAuth();\n  const theme = useTheme();\n\n  // State for sales data\n  const [sales, setSales] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [totalSales, setTotalSales] = useState(0);\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n\n  // State for filtering/searching\n  const [searchTerm, setSearchTerm] = useState('');\n  const [startDate, setStartDate] = useState(null);\n  const [endDate, setEndDate] = useState(null);\n  const [paymentMethod, setPaymentMethod] = useState('');\n  const [showFilters, setShowFilters] = useState(false);\n\n  // State for sale cancellation\n  const [cancelSaleId, setCancelSaleId] = useState(null);\n  const [confirmCancelOpen, setConfirmCancelOpen] = useState(false);\n  const [cancelling, setCancelling] = useState(false);\n\n  // State for new sale dialog\n  const [newSaleDialogOpen, setNewSaleDialogOpen] = useState(false);\n  const [products, setProducts] = useState([]);\n  const [loadingProducts, setLoadingProducts] = useState(false);\n  const [selectedProduct, setSelectedProduct] = useState('');\n  const [newSaleData, setNewSaleData] = useState({\n    productId: '',\n    quantity: 1,\n    customerName: '',\n    customerContact: '',\n    paymentMethod: 'Cash',\n    notes: ''\n  });\n  const [newSaleErrors, setNewSaleErrors] = useState({});\n  const [submittingNewSale, setSubmittingNewSale] = useState(false);\n\n  // State for notifications\n  const [notification, setNotification] = useState({\n    open: false,\n    message: '',\n    severity: 'success'\n  });\n\n  // Stats\n  const [salesStats, setSalesStats] = useState({\n    totalRevenue: 0,\n    totalSales: 0,\n    averageOrderValue: 0\n  });\n\n  // Fetch sales on component mount\n  useEffect(() => {\n    fetchSales();\n    fetchSalesStats();\n  }, [refreshTrigger, page, rowsPerPage, searchTerm, startDate, endDate, paymentMethod]);\n  const fetchSales = async () => {\n    try {\n      setLoading(true);\n\n      // Construct query parameters for filtering\n      const params = {\n        page,\n        limit: rowsPerPage\n      };\n      if (searchTerm) params.search = searchTerm;\n      if (startDate) params.startDate = startDate.toISOString();\n      if (endDate) params.endDate = endDate.toISOString();\n      if (paymentMethod) params.paymentMethod = paymentMethod;\n      const response = await api.sales.getAll(params);\n      setSales(response.data.sales);\n      setTotalSales(response.data.totalCount || response.data.sales.length);\n      setLoading(false);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Error fetching sales:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to fetch sales');\n      setLoading(false);\n    }\n  };\n  const fetchSalesStats = async () => {\n    try {\n      const params = {};\n      if (startDate) params.startDate = startDate.toISOString();\n      if (endDate) params.endDate = endDate.toISOString();\n      console.log('Fetching sales stats with params:', params);\n      const response = await api.sales.getStats(params);\n      console.log('Sales stats API response:', response.data);\n\n      // The API returns data in a 'stats' object\n      if (response.data && response.data.stats) {\n        const {\n          totalSales,\n          totalRevenue\n        } = response.data.stats;\n        console.log('Extracted stats:', {\n          totalSales,\n          totalRevenue\n        });\n        setSalesStats({\n          totalSales,\n          totalRevenue,\n          averageOrderValue: totalSales ? totalRevenue / totalSales : 0\n        });\n      } else {\n        console.error('Invalid response format from sales stats API');\n      }\n    } catch (err) {\n      console.error('Error fetching sales statistics:', err);\n    }\n  };\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n  const handleSearchChange = e => {\n    setSearchTerm(e.target.value);\n    setPage(0);\n  };\n  const handlePaymentMethodChange = e => {\n    setPaymentMethod(e.target.value);\n    setPage(0);\n  };\n  const handleDateChange = (type, date) => {\n    if (type === 'start') {\n      setStartDate(date);\n    } else {\n      setEndDate(date);\n    }\n    setPage(0);\n  };\n  const handleResetFilters = () => {\n    setSearchTerm('');\n    setStartDate(null);\n    setEndDate(null);\n    setPaymentMethod('');\n    setPage(0);\n  };\n  const handleRefresh = () => {\n    setRefreshTrigger(prev => prev + 1);\n    // Also explicitly fetch sales stats\n    fetchSalesStats();\n  };\n  const handleViewSale = id => {\n    navigate(`/sales/${id}`);\n  };\n  const handleCancelSale = id => {\n    setCancelSaleId(id);\n    setConfirmCancelOpen(true);\n  };\n  const confirmCancelSale = async () => {\n    try {\n      setCancelling(true);\n      await api.sales.cancel(cancelSaleId);\n      setNotification({\n        open: true,\n        message: 'Sale cancelled successfully',\n        severity: 'success'\n      });\n\n      // Refresh the sales list\n      handleRefresh();\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('Error cancelling sale:', err);\n      setNotification({\n        open: true,\n        message: ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Failed to cancel sale',\n        severity: 'error'\n      });\n    } finally {\n      setCancelling(false);\n      setConfirmCancelOpen(false);\n      setCancelSaleId(null);\n    }\n  };\n  const handleCloseCancelDialog = () => {\n    setConfirmCancelOpen(false);\n    setCancelSaleId(null);\n  };\n  const handleCloseNotification = () => {\n    setNotification(prev => ({\n      ...prev,\n      open: false\n    }));\n  };\n  const exportSalesData = () => {\n    // Implement export functionality here\n    // This is a placeholder for future implementation\n    alert('Export functionality will be implemented in a future update.');\n  };\n  const formatDate = dateString => {\n    if (!dateString) return 'N/A';\n    const date = new Date(dateString);\n    if (isNaN(date.getTime())) return 'Invalid date';\n    return new Intl.DateTimeFormat('en-US', {\n      month: '2-digit',\n      day: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: true\n    }).format(date);\n  };\n  const formatCurrency = amount => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 2\n    }).format(amount);\n  };\n  const getStatusColor = status => {\n    switch (status) {\n      case 'Completed':\n        return 'success';\n      case 'Cancelled':\n        return 'error';\n      case 'Pending':\n        return 'warning';\n      default:\n        return 'default';\n    }\n  };\n\n  // Add function to fetch products for the new sale dialog\n  const fetchProducts = async () => {\n    try {\n      setLoadingProducts(true);\n      const response = await api.products.getAll();\n      // Filter out products with zero quantity\n      const availableProducts = response.data.products.filter(product => product.quantity > 0);\n      setProducts(availableProducts);\n      setLoadingProducts(false);\n    } catch (err) {\n      console.error('Error fetching products:', err);\n      setNotification({\n        open: true,\n        message: 'Failed to fetch products',\n        severity: 'error'\n      });\n      setLoadingProducts(false);\n    }\n  };\n\n  // Handle opening the new sale dialog\n  const handleOpenNewSaleDialog = () => {\n    fetchProducts();\n    setNewSaleDialogOpen(true);\n  };\n\n  // Handle closing the new sale dialog\n  const handleCloseNewSaleDialog = () => {\n    setNewSaleDialogOpen(false);\n    // Reset form data\n    setNewSaleData({\n      productId: '',\n      quantity: 1,\n      customerName: '',\n      customerContact: '',\n      paymentMethod: 'Cash',\n      notes: ''\n    });\n    setSelectedProduct('');\n    setNewSaleErrors({});\n  };\n\n  // Handle changes in the new sale form\n  const handleNewSaleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    if (name === 'productId') {\n      setSelectedProduct(value);\n      const selectedProductData = products.find(p => p._id === value);\n      setNewSaleData(prev => ({\n        ...prev,\n        productId: value,\n        // Reset quantity when product changes\n        quantity: 1\n      }));\n    } else {\n      setNewSaleData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n\n    // Clear error for this field\n    if (newSaleErrors[name]) {\n      setNewSaleErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n\n  // Validate the new sale form\n  const validateNewSaleForm = () => {\n    const errors = {};\n    if (!newSaleData.productId) {\n      errors.productId = 'Please select a product';\n    }\n    if (!newSaleData.quantity || newSaleData.quantity <= 0) {\n      errors.quantity = 'Quantity must be greater than 0';\n    }\n\n    // Check if quantity exceeds available stock\n    if (newSaleData.productId && newSaleData.quantity) {\n      const selectedProductData = products.find(p => p._id === newSaleData.productId);\n      if (selectedProductData && newSaleData.quantity > selectedProductData.quantity) {\n        errors.quantity = `Only ${selectedProductData.quantity} units available`;\n      }\n    }\n    return errors;\n  };\n\n  // Handle creating a new sale\n  const handleCreateSale = async () => {\n    const errors = validateNewSaleForm();\n    if (Object.keys(errors).length > 0) {\n      setNewSaleErrors(errors);\n      return;\n    }\n    try {\n      setSubmittingNewSale(true);\n      await api.sales.create(newSaleData);\n      setNotification({\n        open: true,\n        message: 'Sale created successfully',\n        severity: 'success'\n      });\n\n      // Refresh sales data\n      handleRefresh();\n\n      // Close dialog\n      handleCloseNewSaleDialog();\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      console.error('Error creating sale:', err);\n      setNotification({\n        open: true,\n        message: ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || 'Failed to create sale',\n        severity: 'error'\n      });\n    } finally {\n      setSubmittingNewSale(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(MainLayout, {\n    title: \"Sales\",\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      sx: {\n        mb: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          fontWeight: \"bold\",\n          children: \"Sales Overview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Refresh Stats\",\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: fetchSalesStats,\n            size: \"small\",\n            children: /*#__PURE__*/_jsxDEV(RefreshIcon, {\n              fontSize: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            borderRadius: 3,\n            boxShadow: theme.shadows[2]\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            sx: {\n              p: 3\n            },\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              alignItems: \"center\",\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  bgcolor: alpha(theme.palette.primary.main, 0.1),\n                  p: 1.5,\n                  borderRadius: 2,\n                  display: 'flex',\n                  mr: 2\n                },\n                children: /*#__PURE__*/_jsxDEV(PointOfSaleIcon, {\n                  color: \"primary\",\n                  fontSize: \"large\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  children: \"Total Revenue\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h5\",\n                  fontWeight: \"bold\",\n                  children: formatCurrency(salesStats.totalRevenue || 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            borderRadius: 3,\n            boxShadow: theme.shadows[2]\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            sx: {\n              p: 3\n            },\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              alignItems: \"center\",\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  bgcolor: alpha(theme.palette.success.main, 0.1),\n                  p: 1.5,\n                  borderRadius: 2,\n                  display: 'flex',\n                  mr: 2\n                },\n                children: /*#__PURE__*/_jsxDEV(ReceiptIcon, {\n                  color: \"success\",\n                  fontSize: \"large\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  children: \"Total Sales\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h5\",\n                  fontWeight: \"bold\",\n                  children: salesStats.totalSales || 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 458,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            borderRadius: 3,\n            boxShadow: theme.shadows[2]\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            sx: {\n              p: 3\n            },\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              alignItems: \"center\",\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  bgcolor: alpha(theme.palette.info.main, 0.1),\n                  p: 1.5,\n                  borderRadius: 2,\n                  display: 'flex',\n                  mr: 2\n                },\n                children: /*#__PURE__*/_jsxDEV(ReceiptIcon, {\n                  color: \"info\",\n                  fontSize: \"large\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  children: \"Average Order Value\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h5\",\n                  fontWeight: \"bold\",\n                  children: formatCurrency(salesStats.averageOrderValue || 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        mb: 3,\n        flexWrap: 'wrap',\n        gap: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          placeholder: \"Search transactions...\",\n          variant: \"outlined\",\n          size: \"small\",\n          InputProps: {\n            startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"start\",\n              children: /*#__PURE__*/_jsxDEV(SearchIcon, {\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 17\n            }, this)\n          },\n          value: searchTerm,\n          onChange: handleSearchChange,\n          sx: {\n            width: 240\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          startIcon: /*#__PURE__*/_jsxDEV(FilterListIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 24\n          }, this),\n          onClick: () => setShowFilters(!showFilters),\n          variant: showFilters ? \"contained\" : \"outlined\",\n          size: \"small\",\n          sx: {\n            borderRadius: 2\n          },\n          children: showFilters ? 'Hide Filters' : 'Show Filters'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          gap: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Refresh\",\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: handleRefresh,\n            size: \"small\",\n            children: /*#__PURE__*/_jsxDEV(RefreshIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 538,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          startIcon: /*#__PURE__*/_jsxDEV(FileDownloadIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 24\n          }, this),\n          onClick: exportSalesData,\n          sx: {\n            borderRadius: 2\n          },\n          children: \"Export\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 24\n          }, this),\n          onClick: handleOpenNewSaleDialog,\n          sx: {\n            borderRadius: 2\n          },\n          children: \"New Sale\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 7\n    }, this), showFilters && /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3,\n        mb: 3,\n        borderRadius: 3,\n        boxShadow: theme.shadows[2]\n      },\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        alignItems: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          md: 3,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Start Date\",\n            type: \"date\",\n            fullWidth: true,\n            size: \"small\",\n            value: startDate ? startDate.toISOString().split('T')[0] : '',\n            onChange: e => {\n              const value = e.target.value;\n              handleDateChange('start', value ? new Date(value) : null);\n            },\n            InputProps: {\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: /*#__PURE__*/_jsxDEV(CalendarTodayIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 587,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 21\n              }, this)\n            },\n            InputLabelProps: {\n              shrink: true\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          md: 3,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"End Date\",\n            type: \"date\",\n            fullWidth: true,\n            size: \"small\",\n            value: endDate ? endDate.toISOString().split('T')[0] : '',\n            onChange: e => {\n              const value = e.target.value;\n              handleDateChange('end', value ? new Date(value) : null);\n            },\n            InputProps: {\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: /*#__PURE__*/_jsxDEV(CalendarTodayIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 609,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 21\n              }, this)\n            },\n            InputLabelProps: {\n              shrink: true\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          md: 3,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            select: true,\n            label: \"Payment Method\",\n            fullWidth: true,\n            size: \"small\",\n            value: paymentMethod,\n            onChange: handlePaymentMethodChange,\n            children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"\",\n              children: \"All Methods\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 626,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"Cash\",\n              children: \"Cash\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 627,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"Credit Card\",\n              children: \"Credit Card\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 628,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"Debit Card\",\n              children: \"Debit Card\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"Mobile Payment\",\n              children: \"Mobile Payment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"Bank Transfer\",\n              children: \"Bank Transfer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          md: 3,\n          sx: {\n            display: 'flex',\n            justifyContent: 'flex-end'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"inherit\",\n            onClick: handleResetFilters,\n            sx: {\n              borderRadius: 2,\n              mr: 1\n            },\n            children: \"Reset\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 636,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            onClick: fetchSales,\n            sx: {\n              borderRadius: 2\n            },\n            children: \"Apply\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        overflow: 'hidden',\n        borderRadius: 3,\n        boxShadow: theme.shadows[2]\n      },\n      children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          m: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 664,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            sx: {\n              bgcolor: alpha(theme.palette.primary.main, 0.05)\n            },\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  fontWeight: 'bold'\n                },\n                children: \"Transaction ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 670,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  fontWeight: 'bold'\n                },\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 671,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  fontWeight: 'bold'\n                },\n                children: \"Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 672,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  fontWeight: 'bold'\n                },\n                children: \"Customer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  fontWeight: 'bold'\n                },\n                children: \"Payment Method\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  fontWeight: 'bold'\n                },\n                align: \"right\",\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 675,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  fontWeight: 'bold'\n                },\n                align: \"right\",\n                children: \"Amount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  fontWeight: 'bold'\n                },\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  fontWeight: 'bold'\n                },\n                align: \"center\",\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 678,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 668,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: loading ? /*#__PURE__*/_jsxDEV(TableRow, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                colSpan: 9,\n                align: \"center\",\n                sx: {\n                  py: 3\n                },\n                children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n                  size: 30\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 685,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 684,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 683,\n              columnNumber: 17\n            }, this) : sales.length === 0 ? /*#__PURE__*/_jsxDEV(TableRow, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                colSpan: 9,\n                align: \"center\",\n                sx: {\n                  py: 3\n                },\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  color: \"text.secondary\",\n                  children: \"No sales records found\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 691,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 690,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 17\n            }, this) : sales.map(sale => /*#__PURE__*/_jsxDEV(TableRow, {\n              hover: true,\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: sale.transactionId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 699,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: formatDate(sale.saleDate)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 700,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: sale.productName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 701,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: [sale.customerName || 'Walk-in Customer', sale.customerContact && /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  display: \"block\",\n                  color: \"text.secondary\",\n                  children: sale.customerContact\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 705,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 702,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: sale.paymentMethod\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 710,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: sale.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 711,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                sx: {\n                  fontWeight: 'medium'\n                },\n                children: formatCurrency(sale.totalAmount)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 712,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(Chip, {\n                  label: sale.status,\n                  size: \"small\",\n                  color: getStatusColor(sale.status)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 716,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 715,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"center\",\n                children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                  title: \"View Details\",\n                  children: /*#__PURE__*/_jsxDEV(IconButton, {\n                    size: \"small\",\n                    onClick: () => handleViewSale(sale._id),\n                    sx: {\n                      mr: 1\n                    },\n                    children: /*#__PURE__*/_jsxDEV(VisibilityIcon, {\n                      fontSize: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 729,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 724,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 723,\n                  columnNumber: 23\n                }, this), sale.status !== 'Cancelled' && /*#__PURE__*/_jsxDEV(Tooltip, {\n                  title: \"Cancel Sale\",\n                  children: /*#__PURE__*/_jsxDEV(IconButton, {\n                    size: \"small\",\n                    color: \"error\",\n                    onClick: () => handleCancelSale(sale._id),\n                    children: /*#__PURE__*/_jsxDEV(CancelIcon, {\n                      fontSize: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 740,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 735,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 734,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 722,\n                columnNumber: 21\n              }, this)]\n            }, sale._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 667,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TablePagination, {\n        rowsPerPageOptions: [5, 10, 25, 50],\n        component: \"div\",\n        count: totalSales,\n        rowsPerPage: rowsPerPage,\n        page: page,\n        onPageChange: handleChangePage,\n        onRowsPerPageChange: handleChangeRowsPerPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 752,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 657,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: confirmCancelOpen,\n      onClose: handleCloseCancelDialog,\n      maxWidth: \"xs\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"Confirm Cancellation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 770,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          children: \"Are you sure you want to cancel this sale? This will return the items to inventory.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 774,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 773,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        sx: {\n          p: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCloseCancelDialog,\n          color: \"inherit\",\n          disabled: cancelling,\n          children: \"No, Keep It\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 779,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: confirmCancelSale,\n          color: \"error\",\n          variant: \"contained\",\n          disabled: cancelling,\n          startIcon: cancelling ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 791,\n            columnNumber: 37\n          }, this) : /*#__PURE__*/_jsxDEV(CancelIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 791,\n            columnNumber: 70\n          }, this),\n          children: cancelling ? 'Cancelling...' : 'Yes, Cancel Sale'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 786,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 778,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 764,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: notification.open,\n      autoHideDuration: 6000,\n      onClose: handleCloseNotification,\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'right'\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: handleCloseNotification,\n        severity: notification.severity,\n        variant: \"filled\",\n        sx: {\n          width: '100%'\n        },\n        children: notification.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 805,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 799,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: newSaleDialogOpen,\n      onClose: handleCloseNewSaleDialog,\n      maxWidth: \"md\",\n      fullWidth: true,\n      PaperProps: {\n        sx: {\n          borderRadius: 2,\n          boxShadow: theme.shadows[3]\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        sx: {\n          px: 3,\n          py: 2,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          borderBottom: '1px solid',\n          borderColor: 'divider'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          alignItems: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(PointOfSaleIcon, {\n            sx: {\n              mr: 1.5,\n              color: theme.palette.primary.main,\n              fontSize: 28\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 840,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            fontWeight: \"bold\",\n            children: \"Create New Sale\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 847,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 839,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: handleCloseNewSaleDialog,\n          size: \"small\",\n          \"aria-label\": \"close\",\n          children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 856,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 851,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 828,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        sx: {\n          px: 3,\n          py: 3\n        },\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle1\",\n              fontWeight: \"medium\",\n              sx: {\n                mb: 2\n              },\n              children: \"Product Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 863,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Paper, {\n              elevation: 0,\n              sx: {\n                p: 3,\n                borderRadius: 2,\n                border: '1px solid',\n                borderColor: 'divider',\n                bgcolor: alpha(theme.palette.background.default, 0.5)\n              },\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    color: \"text.secondary\",\n                    gutterBottom: true,\n                    children: \"Select a product from inventory to create a sale\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 878,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                    fullWidth: true,\n                    error: !!newSaleErrors.productId,\n                    variant: \"outlined\",\n                    sx: {\n                      minHeight: 80\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                      id: \"product-select-label\",\n                      children: \"Select Product\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 887,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Select, {\n                      labelId: \"product-select-label\",\n                      name: \"productId\",\n                      value: newSaleData.productId,\n                      onChange: handleNewSaleInputChange,\n                      label: \"Select Product\",\n                      disabled: loadingProducts,\n                      sx: {\n                        '& .MuiSelect-select': {\n                          py: 1.5,\n                          fontSize: '1rem'\n                        }\n                      },\n                      children: loadingProducts ? /*#__PURE__*/_jsxDEV(MenuItem, {\n                        value: \"\",\n                        disabled: true,\n                        children: /*#__PURE__*/_jsxDEV(Box, {\n                          display: \"flex\",\n                          alignItems: \"center\",\n                          children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n                            size: 20,\n                            sx: {\n                              mr: 1\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 905,\n                            columnNumber: 31\n                          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                            children: \"Loading products...\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 906,\n                            columnNumber: 31\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 904,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 903,\n                        columnNumber: 27\n                      }, this) : products.length === 0 ? /*#__PURE__*/_jsxDEV(MenuItem, {\n                        value: \"\",\n                        disabled: true,\n                        children: /*#__PURE__*/_jsxDEV(Box, {\n                          display: \"flex\",\n                          alignItems: \"center\",\n                          sx: {\n                            py: 1\n                          },\n                          children: /*#__PURE__*/_jsxDEV(Typography, {\n                            color: \"error\",\n                            children: \"No products available\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 912,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 911,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 910,\n                        columnNumber: 27\n                      }, this) : products.map(product => /*#__PURE__*/_jsxDEV(MenuItem, {\n                        value: product._id,\n                        sx: {\n                          py: 1.5\n                        },\n                        children: /*#__PURE__*/_jsxDEV(Box, {\n                          children: [/*#__PURE__*/_jsxDEV(Typography, {\n                            fontWeight: \"medium\",\n                            children: product.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 919,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                            variant: \"body2\",\n                            color: \"text.secondary\",\n                            children: [\"Price: $\", product.price.toFixed(2), \" \\u2022 Available: \", product.quantity, \" units\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 920,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 918,\n                          columnNumber: 31\n                        }, this)\n                      }, product._id, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 917,\n                        columnNumber: 29\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 888,\n                      columnNumber: 23\n                    }, this), newSaleErrors.productId && /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"caption\",\n                      color: \"error\",\n                      sx: {\n                        mt: 0.5,\n                        ml: 1.5\n                      },\n                      children: newSaleErrors.productId\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 929,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 881,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 877,\n                  columnNumber: 19\n                }, this), selectedProduct && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      name: \"quantity\",\n                      label: \"Quantity\",\n                      fullWidth: true,\n                      variant: \"outlined\",\n                      type: \"number\",\n                      required: true,\n                      value: newSaleData.quantity,\n                      onChange: handleNewSaleInputChange,\n                      error: !!newSaleErrors.quantity,\n                      helperText: newSaleErrors.quantity,\n                      InputProps: {\n                        inputProps: {\n                          min: 1,\n                          max: ((_products$find = products.find(p => p._id === selectedProduct)) === null || _products$find === void 0 ? void 0 : _products$find.quantity) || 1\n                        }\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 939,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 938,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      label: \"Total Amount\",\n                      fullWidth: true,\n                      variant: \"outlined\",\n                      value: formatCurrency(newSaleData.quantity * (((_products$find2 = products.find(p => p._id === selectedProduct)) === null || _products$find2 === void 0 ? void 0 : _products$find2.price) || 0)),\n                      InputProps: {\n                        readOnly: true,\n                        startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                          position: \"start\",\n                          children: \"$\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 970,\n                          columnNumber: 45\n                        }, this)\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 960,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 959,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 876,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 866,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 862,\n            columnNumber: 13\n          }, this), selectedProduct && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle1\",\n                fontWeight: \"medium\",\n                sx: {\n                  mb: 2\n                },\n                children: \"Customer Information\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 983,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Paper, {\n                elevation: 0,\n                sx: {\n                  p: 2.5,\n                  borderRadius: 2,\n                  border: '1px solid',\n                  borderColor: 'divider',\n                  bgcolor: alpha(theme.palette.background.default, 0.5)\n                },\n                children: /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 2,\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      name: \"customerName\",\n                      label: \"Customer Name\",\n                      placeholder: \"Optional\",\n                      fullWidth: true,\n                      variant: \"outlined\",\n                      value: newSaleData.customerName,\n                      onChange: handleNewSaleInputChange\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 998,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 997,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      name: \"customerContact\",\n                      label: \"Customer Contact\",\n                      placeholder: \"Optional\",\n                      fullWidth: true,\n                      variant: \"outlined\",\n                      value: newSaleData.customerContact,\n                      onChange: handleNewSaleInputChange\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1010,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1009,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      variant: \"outlined\",\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        id: \"payment-method-label\",\n                        children: \"Payment Method\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1023,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        labelId: \"payment-method-label\",\n                        name: \"paymentMethod\",\n                        value: newSaleData.paymentMethod,\n                        onChange: handleNewSaleInputChange,\n                        label: \"Payment Method\",\n                        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"Cash\",\n                          children: \"Cash\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1031,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"Credit Card\",\n                          children: \"Credit Card\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1032,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"Debit Card\",\n                          children: \"Debit Card\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1033,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"Mobile Payment\",\n                          children: \"Mobile Payment\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1034,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"Bank Transfer\",\n                          children: \"Bank Transfer\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1035,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1024,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1022,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1021,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 996,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 986,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 982,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle1\",\n                fontWeight: \"medium\",\n                sx: {\n                  mb: 2\n                },\n                children: \"Additional Information\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1044,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Paper, {\n                elevation: 0,\n                sx: {\n                  p: 2.5,\n                  borderRadius: 2,\n                  border: '1px solid',\n                  borderColor: 'divider',\n                  bgcolor: alpha(theme.palette.background.default, 0.5)\n                },\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  name: \"notes\",\n                  label: \"Notes\",\n                  placeholder: \"Optional\",\n                  fullWidth: true,\n                  variant: \"outlined\",\n                  multiline: true,\n                  rows: 3,\n                  value: newSaleData.notes,\n                  onChange: handleNewSaleInputChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1057,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1047,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1043,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 861,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 860,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        sx: {\n          px: 3,\n          py: 2.5,\n          borderTop: '1px solid',\n          borderColor: 'divider'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCloseNewSaleDialog,\n          variant: \"outlined\",\n          size: \"large\",\n          sx: {\n            borderRadius: 2,\n            px: 3\n          },\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1083,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCreateSale,\n          variant: \"contained\",\n          color: \"primary\",\n          size: \"large\",\n          disabled: submittingNewSale || !selectedProduct,\n          sx: {\n            borderRadius: 2,\n            px: 3,\n            ml: 2\n          },\n          startIcon: submittingNewSale ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1102,\n            columnNumber: 44\n          }, this) : /*#__PURE__*/_jsxDEV(PointOfSaleIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1102,\n            columnNumber: 77\n          }, this),\n          children: submittingNewSale ? 'Processing...' : 'Complete Sale'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1091,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1075,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 816,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 400,\n    columnNumber: 5\n  }, this);\n};\n_s(Sales, \"Qvu2qLB0QbzgfaRtOgN9AhHfu8Y=\", false, function () {\n  return [useNavigate, useAuth, useTheme];\n});\n_c = Sales;\nexport default Sales;\nvar _c;\n$RefreshReg$(_c, \"Sales\");","map":{"version":3,"names":["useState","useEffect","useNavigate","Box","Grid","Typography","Paper","Card","CardContent","Button","TextField","MenuItem","InputAdornment","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TablePagination","Chip","Tooltip","IconButton","Dialog","DialogTitle","DialogContent","DialogActions","CircularProgress","Alert","Snackbar","Divider","alpha","useTheme","FormControl","InputLabel","Select","SearchIcon","FilterListIcon","PointOfSaleIcon","ReceiptIcon","CancelIcon","VisibilityIcon","AddIcon","FileDownloadIcon","RefreshIcon","CalendarTodayIcon","CloseIcon","MainLayout","useAuth","api","jsxDEV","_jsxDEV","Fragment","_Fragment","Sales","_s","_products$find","_products$find2","navigate","isAdmin","theme","sales","setSales","loading","setLoading","error","setError","page","setPage","rowsPerPage","setRowsPerPage","totalSales","setTotalSales","refreshTrigger","setRefreshTrigger","searchTerm","setSearchTerm","startDate","setStartDate","endDate","setEndDate","paymentMethod","setPaymentMethod","showFilters","setShowFilters","cancelSaleId","setCancelSaleId","confirmCancelOpen","setConfirmCancelOpen","cancelling","setCancelling","newSaleDialogOpen","setNewSaleDialogOpen","products","setProducts","loadingProducts","setLoadingProducts","selectedProduct","setSelectedProduct","newSaleData","setNewSaleData","productId","quantity","customerName","customerContact","notes","newSaleErrors","setNewSaleErrors","submittingNewSale","setSubmittingNewSale","notification","setNotification","open","message","severity","salesStats","setSalesStats","totalRevenue","averageOrderValue","fetchSales","fetchSalesStats","params","limit","search","toISOString","response","getAll","data","totalCount","length","err","_err$response","_err$response$data","console","log","getStats","stats","handleChangePage","event","newPage","handleChangeRowsPerPage","parseInt","target","value","handleSearchChange","e","handlePaymentMethodChange","handleDateChange","type","date","handleResetFilters","handleRefresh","prev","handleViewSale","id","handleCancelSale","confirmCancelSale","cancel","_err$response2","_err$response2$data","handleCloseCancelDialog","handleCloseNotification","exportSalesData","alert","formatDate","dateString","Date","isNaN","getTime","Intl","DateTimeFormat","month","day","year","hour","minute","hour12","format","formatCurrency","amount","NumberFormat","style","currency","minimumFractionDigits","getStatusColor","status","fetchProducts","availableProducts","filter","product","handleOpenNewSaleDialog","handleCloseNewSaleDialog","handleNewSaleInputChange","name","selectedProductData","find","p","_id","validateNewSaleForm","errors","handleCreateSale","Object","keys","create","_err$response3","_err$response3$data","title","children","container","spacing","sx","mb","item","xs","display","justifyContent","alignItems","variant","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","fontSize","md","borderRadius","boxShadow","shadows","bgcolor","palette","primary","main","mr","color","success","info","flexWrap","gap","placeholder","InputProps","startAdornment","position","onChange","width","startIcon","sm","label","fullWidth","split","InputLabelProps","shrink","select","overflow","m","align","colSpan","py","map","sale","hover","transactionId","saleDate","productName","totalAmount","rowsPerPageOptions","component","count","onPageChange","onRowsPerPageChange","onClose","maxWidth","disabled","autoHideDuration","anchorOrigin","vertical","horizontal","PaperProps","px","borderBottom","borderColor","elevation","border","background","default","gutterBottom","minHeight","labelId","price","toFixed","mt","ml","required","helperText","inputProps","min","max","readOnly","multiline","rows","borderTop","_c","$RefreshReg$"],"sources":["C:/HCK/FYP/inventory-management-system/frontend/src/pages/sales/Sales.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Box, Grid, Typography, Paper, Card, CardContent,\r\n  Button, TextField, MenuItem, InputAdornment,\r\n  Table, TableBody, TableCell, TableContainer, TableHead, \r\n  TableRow, TablePagination, Chip, Tooltip, IconButton,\r\n  Dialog, DialogTitle, DialogContent, DialogActions,\r\n  CircularProgress, Alert, Snackbar,\r\n  Divider, alpha, useTheme, FormControl, InputLabel, Select\r\n} from '@mui/material';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport FilterListIcon from '@mui/icons-material/FilterList';\r\nimport PointOfSaleIcon from '@mui/icons-material/PointOfSale';\r\nimport ReceiptIcon from '@mui/icons-material/Receipt';\r\nimport CancelIcon from '@mui/icons-material/Cancel';\r\nimport VisibilityIcon from '@mui/icons-material/Visibility';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport FileDownloadIcon from '@mui/icons-material/FileDownload';\r\nimport RefreshIcon from '@mui/icons-material/Refresh';\r\nimport CalendarTodayIcon from '@mui/icons-material/CalendarToday';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport MainLayout from '../../components/layout/MainLayout';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport api from '../../services/api';\r\n\r\nconst Sales = () => {\r\n  const navigate = useNavigate();\r\n  const { isAdmin } = useAuth();\r\n  const theme = useTheme();\r\n  \r\n  // State for sales data\r\n  const [sales, setSales] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [totalSales, setTotalSales] = useState(0);\r\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n  \r\n  // State for filtering/searching\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [startDate, setStartDate] = useState(null);\r\n  const [endDate, setEndDate] = useState(null);\r\n  const [paymentMethod, setPaymentMethod] = useState('');\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  \r\n  // State for sale cancellation\r\n  const [cancelSaleId, setCancelSaleId] = useState(null);\r\n  const [confirmCancelOpen, setConfirmCancelOpen] = useState(false);\r\n  const [cancelling, setCancelling] = useState(false);\r\n  \r\n  // State for new sale dialog\r\n  const [newSaleDialogOpen, setNewSaleDialogOpen] = useState(false);\r\n  const [products, setProducts] = useState([]);\r\n  const [loadingProducts, setLoadingProducts] = useState(false);\r\n  const [selectedProduct, setSelectedProduct] = useState('');\r\n  const [newSaleData, setNewSaleData] = useState({\r\n    productId: '',\r\n    quantity: 1,\r\n    customerName: '',\r\n    customerContact: '',\r\n    paymentMethod: 'Cash',\r\n    notes: ''\r\n  });\r\n  const [newSaleErrors, setNewSaleErrors] = useState({});\r\n  const [submittingNewSale, setSubmittingNewSale] = useState(false);\r\n  \r\n  // State for notifications\r\n  const [notification, setNotification] = useState({ open: false, message: '', severity: 'success' });\r\n  \r\n  // Stats\r\n  const [salesStats, setSalesStats] = useState({\r\n    totalRevenue: 0,\r\n    totalSales: 0,\r\n    averageOrderValue: 0,\r\n  });\r\n\r\n  // Fetch sales on component mount\r\n  useEffect(() => {\r\n    fetchSales();\r\n    fetchSalesStats();\r\n  }, [refreshTrigger, page, rowsPerPage, searchTerm, startDate, endDate, paymentMethod]);\r\n\r\n  const fetchSales = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Construct query parameters for filtering\r\n      const params = {\r\n        page,\r\n        limit: rowsPerPage\r\n      };\r\n      \r\n      if (searchTerm) params.search = searchTerm;\r\n      if (startDate) params.startDate = startDate.toISOString();\r\n      if (endDate) params.endDate = endDate.toISOString();\r\n      if (paymentMethod) params.paymentMethod = paymentMethod;\r\n      \r\n      const response = await api.sales.getAll(params);\r\n      setSales(response.data.sales);\r\n      setTotalSales(response.data.totalCount || response.data.sales.length);\r\n      \r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error('Error fetching sales:', err);\r\n      setError(err.response?.data?.error || 'Failed to fetch sales');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchSalesStats = async () => {\r\n    try {\r\n      const params = {};\r\n      if (startDate) params.startDate = startDate.toISOString();\r\n      if (endDate) params.endDate = endDate.toISOString();\r\n      \r\n      console.log('Fetching sales stats with params:', params);\r\n      const response = await api.sales.getStats(params);\r\n      console.log('Sales stats API response:', response.data);\r\n      \r\n      // The API returns data in a 'stats' object\r\n      if (response.data && response.data.stats) {\r\n        const { totalSales, totalRevenue } = response.data.stats;\r\n        console.log('Extracted stats:', { totalSales, totalRevenue });\r\n        \r\n        setSalesStats({\r\n          totalSales,\r\n          totalRevenue,\r\n          averageOrderValue: totalSales ? totalRevenue / totalSales : 0\r\n        });\r\n      } else {\r\n        console.error('Invalid response format from sales stats API');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching sales statistics:', err);\r\n    }\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n  \r\n  const handleSearchChange = (e) => {\r\n    setSearchTerm(e.target.value);\r\n    setPage(0);\r\n  };\r\n  \r\n  const handlePaymentMethodChange = (e) => {\r\n    setPaymentMethod(e.target.value);\r\n    setPage(0);\r\n  };\r\n  \r\n  const handleDateChange = (type, date) => {\r\n    if (type === 'start') {\r\n      setStartDate(date);\r\n    } else {\r\n      setEndDate(date);\r\n    }\r\n    setPage(0);\r\n  };\r\n  \r\n  const handleResetFilters = () => {\r\n    setSearchTerm('');\r\n    setStartDate(null);\r\n    setEndDate(null);\r\n    setPaymentMethod('');\r\n    setPage(0);\r\n  };\r\n  \r\n  const handleRefresh = () => {\r\n    setRefreshTrigger(prev => prev + 1);\r\n    // Also explicitly fetch sales stats\r\n    fetchSalesStats();\r\n  };\r\n  \r\n  const handleViewSale = (id) => {\r\n    navigate(`/sales/${id}`);\r\n  };\r\n  \r\n  const handleCancelSale = (id) => {\r\n    setCancelSaleId(id);\r\n    setConfirmCancelOpen(true);\r\n  };\r\n  \r\n  const confirmCancelSale = async () => {\r\n    try {\r\n      setCancelling(true);\r\n      \r\n      await api.sales.cancel(cancelSaleId);\r\n      \r\n      setNotification({\r\n        open: true,\r\n        message: 'Sale cancelled successfully',\r\n        severity: 'success'\r\n      });\r\n      \r\n      // Refresh the sales list\r\n      handleRefresh();\r\n      \r\n    } catch (err) {\r\n      console.error('Error cancelling sale:', err);\r\n      setNotification({\r\n        open: true,\r\n        message: err.response?.data?.error || 'Failed to cancel sale',\r\n        severity: 'error'\r\n      });\r\n    } finally {\r\n      setCancelling(false);\r\n      setConfirmCancelOpen(false);\r\n      setCancelSaleId(null);\r\n    }\r\n  };\r\n  \r\n  const handleCloseCancelDialog = () => {\r\n    setConfirmCancelOpen(false);\r\n    setCancelSaleId(null);\r\n  };\r\n  \r\n  const handleCloseNotification = () => {\r\n    setNotification(prev => ({ ...prev, open: false }));\r\n  };\r\n  \r\n  const exportSalesData = () => {\r\n    // Implement export functionality here\r\n    // This is a placeholder for future implementation\r\n    alert('Export functionality will be implemented in a future update.');\r\n  };\r\n  \r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    \r\n    const date = new Date(dateString);\r\n    if (isNaN(date.getTime())) return 'Invalid date';\r\n    \r\n    return new Intl.DateTimeFormat('en-US', {\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      hour12: true\r\n    }).format(date);\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: 'USD',\r\n      minimumFractionDigits: 2\r\n    }).format(amount);\r\n  };\r\n  \r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'Completed':\r\n        return 'success';\r\n      case 'Cancelled':\r\n        return 'error';\r\n      case 'Pending':\r\n        return 'warning';\r\n      default:\r\n        return 'default';\r\n    }\r\n  };\r\n\r\n  // Add function to fetch products for the new sale dialog\r\n  const fetchProducts = async () => {\r\n    try {\r\n      setLoadingProducts(true);\r\n      const response = await api.products.getAll();\r\n      // Filter out products with zero quantity\r\n      const availableProducts = response.data.products.filter(product => product.quantity > 0);\r\n      setProducts(availableProducts);\r\n      setLoadingProducts(false);\r\n    } catch (err) {\r\n      console.error('Error fetching products:', err);\r\n      setNotification({\r\n        open: true,\r\n        message: 'Failed to fetch products',\r\n        severity: 'error'\r\n      });\r\n      setLoadingProducts(false);\r\n    }\r\n  };\r\n\r\n  // Handle opening the new sale dialog\r\n  const handleOpenNewSaleDialog = () => {\r\n    fetchProducts();\r\n    setNewSaleDialogOpen(true);\r\n  };\r\n\r\n  // Handle closing the new sale dialog\r\n  const handleCloseNewSaleDialog = () => {\r\n    setNewSaleDialogOpen(false);\r\n    // Reset form data\r\n    setNewSaleData({\r\n      productId: '',\r\n      quantity: 1,\r\n      customerName: '',\r\n      customerContact: '',\r\n      paymentMethod: 'Cash',\r\n      notes: ''\r\n    });\r\n    setSelectedProduct('');\r\n    setNewSaleErrors({});\r\n  };\r\n\r\n  // Handle changes in the new sale form\r\n  const handleNewSaleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    \r\n    if (name === 'productId') {\r\n      setSelectedProduct(value);\r\n      const selectedProductData = products.find(p => p._id === value);\r\n      \r\n      setNewSaleData(prev => ({\r\n        ...prev,\r\n        productId: value,\r\n        // Reset quantity when product changes\r\n        quantity: 1\r\n      }));\r\n    } else {\r\n      setNewSaleData(prev => ({ ...prev, [name]: value }));\r\n    }\r\n    \r\n    // Clear error for this field\r\n    if (newSaleErrors[name]) {\r\n      setNewSaleErrors(prev => ({ ...prev, [name]: '' }));\r\n    }\r\n  };\r\n\r\n  // Validate the new sale form\r\n  const validateNewSaleForm = () => {\r\n    const errors = {};\r\n    \r\n    if (!newSaleData.productId) {\r\n      errors.productId = 'Please select a product';\r\n    }\r\n    \r\n    if (!newSaleData.quantity || newSaleData.quantity <= 0) {\r\n      errors.quantity = 'Quantity must be greater than 0';\r\n    }\r\n    \r\n    // Check if quantity exceeds available stock\r\n    if (newSaleData.productId && newSaleData.quantity) {\r\n      const selectedProductData = products.find(p => p._id === newSaleData.productId);\r\n      if (selectedProductData && newSaleData.quantity > selectedProductData.quantity) {\r\n        errors.quantity = `Only ${selectedProductData.quantity} units available`;\r\n      }\r\n    }\r\n    \r\n    return errors;\r\n  };\r\n\r\n  // Handle creating a new sale\r\n  const handleCreateSale = async () => {\r\n    const errors = validateNewSaleForm();\r\n    \r\n    if (Object.keys(errors).length > 0) {\r\n      setNewSaleErrors(errors);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setSubmittingNewSale(true);\r\n      \r\n      await api.sales.create(newSaleData);\r\n      \r\n      setNotification({\r\n        open: true,\r\n        message: 'Sale created successfully',\r\n        severity: 'success'\r\n      });\r\n      \r\n      // Refresh sales data\r\n      handleRefresh();\r\n      \r\n      // Close dialog\r\n      handleCloseNewSaleDialog();\r\n      \r\n    } catch (err) {\r\n      console.error('Error creating sale:', err);\r\n      setNotification({\r\n        open: true,\r\n        message: err.response?.data?.error || 'Failed to create sale',\r\n        severity: 'error'\r\n      });\r\n    } finally {\r\n      setSubmittingNewSale(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainLayout title=\"Sales\">\r\n      {/* Stats Section */}\r\n      <Grid container spacing={3} sx={{ mb: 4 }}>\r\n        <Grid item xs={12} sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 1 }}>\r\n          <Typography variant=\"h6\" fontWeight=\"bold\">Sales Overview</Typography>\r\n          <Tooltip title=\"Refresh Stats\">\r\n            <IconButton onClick={fetchSalesStats} size=\"small\">\r\n              <RefreshIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Card sx={{ borderRadius: 3, boxShadow: theme.shadows[2] }}>\r\n            <CardContent sx={{ p: 3 }}>\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Box \r\n                  sx={{ \r\n                    bgcolor: alpha(theme.palette.primary.main, 0.1),\r\n                    p: 1.5,\r\n                    borderRadius: 2,\r\n                    display: 'flex',\r\n                    mr: 2\r\n                  }}\r\n                >\r\n                  <PointOfSaleIcon color=\"primary\" fontSize=\"large\" />\r\n                </Box>\r\n                <Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Total Revenue\r\n                  </Typography>\r\n                  <Typography variant=\"h5\" fontWeight=\"bold\">\r\n                    {formatCurrency(salesStats.totalRevenue || 0)}\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        \r\n        <Grid item xs={12} md={4}>\r\n          <Card sx={{ borderRadius: 3, boxShadow: theme.shadows[2] }}>\r\n            <CardContent sx={{ p: 3 }}>\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Box \r\n                  sx={{ \r\n                    bgcolor: alpha(theme.palette.success.main, 0.1),\r\n                    p: 1.5,\r\n                    borderRadius: 2,\r\n                    display: 'flex',\r\n                    mr: 2\r\n                  }}\r\n                >\r\n                  <ReceiptIcon color=\"success\" fontSize=\"large\" />\r\n                </Box>\r\n                <Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Total Sales\r\n                  </Typography>\r\n                  <Typography variant=\"h5\" fontWeight=\"bold\">\r\n                    {salesStats.totalSales || 0}\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        \r\n        <Grid item xs={12} md={4}>\r\n          <Card sx={{ borderRadius: 3, boxShadow: theme.shadows[2] }}>\r\n            <CardContent sx={{ p: 3 }}>\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Box \r\n                  sx={{ \r\n                    bgcolor: alpha(theme.palette.info.main, 0.1),\r\n                    p: 1.5,\r\n                    borderRadius: 2,\r\n                    display: 'flex',\r\n                    mr: 2\r\n                  }}\r\n                >\r\n                  <ReceiptIcon color=\"info\" fontSize=\"large\" />\r\n                </Box>\r\n                <Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Average Order Value\r\n                  </Typography>\r\n                  <Typography variant=\"h5\" fontWeight=\"bold\">\r\n                    {formatCurrency(salesStats.averageOrderValue || 0)}\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n      </Grid>\r\n      \r\n      {/* Actions Section */}\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          mb: 3,\r\n          flexWrap: 'wrap',\r\n          gap: 2\r\n        }}\r\n      >\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\r\n          <TextField\r\n            placeholder=\"Search transactions...\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon fontSize=\"small\" />\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n            value={searchTerm}\r\n            onChange={handleSearchChange}\r\n            sx={{ width: 240 }}\r\n          />\r\n          \r\n          <Button\r\n            startIcon={<FilterListIcon />}\r\n            onClick={() => setShowFilters(!showFilters)}\r\n            variant={showFilters ? \"contained\" : \"outlined\"}\r\n            size=\"small\"\r\n            sx={{ borderRadius: 2 }}\r\n          >\r\n            {showFilters ? 'Hide Filters' : 'Show Filters'}\r\n          </Button>\r\n        </Box>\r\n        \r\n        <Box sx={{ display: 'flex', gap: 2 }}>\r\n          <Tooltip title=\"Refresh\">\r\n            <IconButton onClick={handleRefresh} size=\"small\">\r\n              <RefreshIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n          \r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<FileDownloadIcon />}\r\n            onClick={exportSalesData}\r\n            sx={{ borderRadius: 2 }}\r\n          >\r\n            Export\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"contained\"\r\n            startIcon={<AddIcon />}\r\n            onClick={handleOpenNewSaleDialog}\r\n            sx={{ borderRadius: 2 }}\r\n          >\r\n            New Sale\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n      \r\n      {/* Filters */}\r\n      {showFilters && (\r\n        <Paper \r\n          sx={{ \r\n            p: 3, \r\n            mb: 3, \r\n            borderRadius: 3,\r\n            boxShadow: theme.shadows[2]\r\n          }}\r\n        >\r\n          <Grid container spacing={2} alignItems=\"center\">\r\n            <Grid item xs={12} sm={6} md={3}>\r\n              <TextField\r\n                label=\"Start Date\"\r\n                type=\"date\"\r\n                fullWidth\r\n                size=\"small\"\r\n                value={startDate ? startDate.toISOString().split('T')[0] : ''}\r\n                onChange={(e) => {\r\n                  const value = e.target.value;\r\n                  handleDateChange('start', value ? new Date(value) : null);\r\n                }}\r\n                InputProps={{\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <CalendarTodayIcon fontSize=\"small\" />\r\n                    </InputAdornment>\r\n                  )\r\n                }}\r\n                InputLabelProps={{ shrink: true }}\r\n              />\r\n            </Grid>\r\n            \r\n            <Grid item xs={12} sm={6} md={3}>\r\n              <TextField\r\n                label=\"End Date\"\r\n                type=\"date\"\r\n                fullWidth\r\n                size=\"small\"\r\n                value={endDate ? endDate.toISOString().split('T')[0] : ''}\r\n                onChange={(e) => {\r\n                  const value = e.target.value;\r\n                  handleDateChange('end', value ? new Date(value) : null);\r\n                }}\r\n                InputProps={{\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <CalendarTodayIcon fontSize=\"small\" />\r\n                    </InputAdornment>\r\n                  )\r\n                }}\r\n                InputLabelProps={{ shrink: true }}\r\n              />\r\n            </Grid>\r\n            \r\n            <Grid item xs={12} sm={6} md={3}>\r\n              <TextField\r\n                select\r\n                label=\"Payment Method\"\r\n                fullWidth\r\n                size=\"small\"\r\n                value={paymentMethod}\r\n                onChange={handlePaymentMethodChange}\r\n              >\r\n                <MenuItem value=\"\">All Methods</MenuItem>\r\n                <MenuItem value=\"Cash\">Cash</MenuItem>\r\n                <MenuItem value=\"Credit Card\">Credit Card</MenuItem>\r\n                <MenuItem value=\"Debit Card\">Debit Card</MenuItem>\r\n                <MenuItem value=\"Mobile Payment\">Mobile Payment</MenuItem>\r\n                <MenuItem value=\"Bank Transfer\">Bank Transfer</MenuItem>\r\n              </TextField>\r\n            </Grid>\r\n            \r\n            <Grid item xs={12} sm={6} md={3} sx={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n              <Button\r\n                variant=\"outlined\"\r\n                color=\"inherit\"\r\n                onClick={handleResetFilters}\r\n                sx={{ borderRadius: 2, mr: 1 }}\r\n              >\r\n                Reset\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={fetchSales}\r\n                sx={{ borderRadius: 2 }}\r\n              >\r\n                Apply\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </Paper>\r\n      )}\r\n      \r\n      {/* Sales Table */}\r\n      <Paper \r\n        sx={{ \r\n          overflow: 'hidden', \r\n          borderRadius: 3,\r\n          boxShadow: theme.shadows[2]\r\n        }}\r\n      >\r\n        {error && <Alert severity=\"error\" sx={{ m: 2 }}>{error}</Alert>}\r\n        \r\n        <TableContainer>\r\n          <Table>\r\n            <TableHead sx={{ bgcolor: alpha(theme.palette.primary.main, 0.05) }}>\r\n              <TableRow>\r\n                <TableCell sx={{ fontWeight: 'bold' }}>Transaction ID</TableCell>\r\n                <TableCell sx={{ fontWeight: 'bold' }}>Date</TableCell>\r\n                <TableCell sx={{ fontWeight: 'bold' }}>Product</TableCell>\r\n                <TableCell sx={{ fontWeight: 'bold' }}>Customer</TableCell>\r\n                <TableCell sx={{ fontWeight: 'bold' }}>Payment Method</TableCell>\r\n                <TableCell sx={{ fontWeight: 'bold' }} align=\"right\">Quantity</TableCell>\r\n                <TableCell sx={{ fontWeight: 'bold' }} align=\"right\">Amount</TableCell>\r\n                <TableCell sx={{ fontWeight: 'bold' }}>Status</TableCell>\r\n                <TableCell sx={{ fontWeight: 'bold' }} align=\"center\">Actions</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {loading ? (\r\n                <TableRow>\r\n                  <TableCell colSpan={9} align=\"center\" sx={{ py: 3 }}>\r\n                    <CircularProgress size={30} />\r\n                  </TableCell>\r\n                </TableRow>\r\n              ) : sales.length === 0 ? (\r\n                <TableRow>\r\n                  <TableCell colSpan={9} align=\"center\" sx={{ py: 3 }}>\r\n                    <Typography variant=\"body1\" color=\"text.secondary\">\r\n                      No sales records found\r\n                    </Typography>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ) : (\r\n                sales.map((sale) => (\r\n                  <TableRow key={sale._id} hover>\r\n                    <TableCell>{sale.transactionId}</TableCell>\r\n                    <TableCell>{formatDate(sale.saleDate)}</TableCell>\r\n                    <TableCell>{sale.productName}</TableCell>\r\n                    <TableCell>\r\n                      {sale.customerName || 'Walk-in Customer'}\r\n                      {sale.customerContact && (\r\n                        <Typography variant=\"caption\" display=\"block\" color=\"text.secondary\">\r\n                          {sale.customerContact}\r\n                        </Typography>\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{sale.paymentMethod}</TableCell>\r\n                    <TableCell align=\"right\">{sale.quantity}</TableCell>\r\n                    <TableCell align=\"right\" sx={{ fontWeight: 'medium' }}>\r\n                      {formatCurrency(sale.totalAmount)}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Chip \r\n                        label={sale.status} \r\n                        size=\"small\"\r\n                        color={getStatusColor(sale.status)}\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell align=\"center\">\r\n                      <Tooltip title=\"View Details\">\r\n                        <IconButton \r\n                          size=\"small\" \r\n                          onClick={() => handleViewSale(sale._id)}\r\n                          sx={{ mr: 1 }}\r\n                        >\r\n                          <VisibilityIcon fontSize=\"small\" />\r\n                        </IconButton>\r\n                      </Tooltip>\r\n                      \r\n                      {sale.status !== 'Cancelled' && (\r\n                        <Tooltip title=\"Cancel Sale\">\r\n                          <IconButton \r\n                            size=\"small\" \r\n                            color=\"error\"\r\n                            onClick={() => handleCancelSale(sale._id)}\r\n                          >\r\n                            <CancelIcon fontSize=\"small\" />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                      )}\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        \r\n        <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25, 50]}\r\n          component=\"div\"\r\n          count={totalSales}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n          onRowsPerPageChange={handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n      \r\n      {/* Cancel Sale Confirmation Dialog */}\r\n      <Dialog\r\n        open={confirmCancelOpen}\r\n        onClose={handleCloseCancelDialog}\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>\r\n          Confirm Cancellation\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"body1\">\r\n            Are you sure you want to cancel this sale? This will return the items to inventory.\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions sx={{ p: 2 }}>\r\n          <Button \r\n            onClick={handleCloseCancelDialog} \r\n            color=\"inherit\" \r\n            disabled={cancelling}\r\n          >\r\n            No, Keep It\r\n          </Button>\r\n          <Button \r\n            onClick={confirmCancelSale} \r\n            color=\"error\" \r\n            variant=\"contained\"\r\n            disabled={cancelling}\r\n            startIcon={cancelling ? <CircularProgress size={24} /> : <CancelIcon />}\r\n          >\r\n            {cancelling ? 'Cancelling...' : 'Yes, Cancel Sale'}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      \r\n      {/* Notification Snackbar */}\r\n      <Snackbar\r\n        open={notification.open}\r\n        autoHideDuration={6000}\r\n        onClose={handleCloseNotification}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\r\n      >\r\n        <Alert \r\n          onClose={handleCloseNotification} \r\n          severity={notification.severity}\r\n          variant=\"filled\"\r\n          sx={{ width: '100%' }}\r\n        >\r\n          {notification.message}\r\n        </Alert>\r\n      </Snackbar>\r\n      \r\n      {/* New Sale Dialog */}\r\n      <Dialog\r\n        open={newSaleDialogOpen}\r\n        onClose={handleCloseNewSaleDialog}\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        PaperProps={{\r\n          sx: {\r\n            borderRadius: 2,\r\n            boxShadow: theme.shadows[3]\r\n          }\r\n        }}\r\n      >\r\n        <DialogTitle \r\n          sx={{ \r\n            px: 3, \r\n            py: 2,\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'space-between',\r\n            borderBottom: '1px solid',\r\n            borderColor: 'divider'\r\n          }}\r\n        >\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <PointOfSaleIcon \r\n              sx={{ \r\n                mr: 1.5, \r\n                color: theme.palette.primary.main,\r\n                fontSize: 28\r\n              }} \r\n            />\r\n            <Typography variant=\"h6\" fontWeight=\"bold\">\r\n              Create New Sale\r\n            </Typography>\r\n          </Box>\r\n          <IconButton \r\n            onClick={handleCloseNewSaleDialog}\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n          >\r\n            <CloseIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </DialogTitle>\r\n        \r\n        <DialogContent sx={{ px: 3, py: 3 }}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"subtitle1\" fontWeight=\"medium\" sx={{ mb: 2 }}>\r\n                Product Information\r\n              </Typography>\r\n              <Paper\r\n                elevation={0}\r\n                sx={{ \r\n                  p: 3, \r\n                  borderRadius: 2,\r\n                  border: '1px solid',\r\n                  borderColor: 'divider',\r\n                  bgcolor: alpha(theme.palette.background.default, 0.5)\r\n                }}\r\n              >\r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={12}>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                      Select a product from inventory to create a sale\r\n                    </Typography>\r\n                    <FormControl \r\n                      fullWidth \r\n                      error={!!newSaleErrors.productId}\r\n                      variant=\"outlined\"\r\n                      sx={{ minHeight: 80 }}\r\n                    >\r\n                      <InputLabel id=\"product-select-label\">Select Product</InputLabel>\r\n                      <Select\r\n                        labelId=\"product-select-label\"\r\n                        name=\"productId\"\r\n                        value={newSaleData.productId}\r\n                        onChange={handleNewSaleInputChange}\r\n                        label=\"Select Product\"\r\n                        disabled={loadingProducts}\r\n                        sx={{ \r\n                          '& .MuiSelect-select': { \r\n                            py: 1.5,\r\n                            fontSize: '1rem'\r\n                          }\r\n                        }}\r\n                      >\r\n                        {loadingProducts ? (\r\n                          <MenuItem value=\"\" disabled>\r\n                            <Box display=\"flex\" alignItems=\"center\">\r\n                              <CircularProgress size={20} sx={{ mr: 1 }} />\r\n                              <Typography>Loading products...</Typography>\r\n                            </Box>\r\n                          </MenuItem>\r\n                        ) : products.length === 0 ? (\r\n                          <MenuItem value=\"\" disabled>\r\n                            <Box display=\"flex\" alignItems=\"center\" sx={{ py: 1 }}>\r\n                              <Typography color=\"error\">No products available</Typography>\r\n                            </Box>\r\n                          </MenuItem>\r\n                        ) : (\r\n                          products.map(product => (\r\n                            <MenuItem key={product._id} value={product._id} sx={{ py: 1.5 }}>\r\n                              <Box>\r\n                                <Typography fontWeight=\"medium\">{product.name}</Typography>\r\n                                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                  Price: ${product.price.toFixed(2)}  Available: {product.quantity} units\r\n                                </Typography>\r\n                              </Box>\r\n                            </MenuItem>\r\n                          ))\r\n                        )}\r\n                      </Select>\r\n                      {newSaleErrors.productId && (\r\n                        <Typography variant=\"caption\" color=\"error\" sx={{ mt: 0.5, ml: 1.5 }}>\r\n                          {newSaleErrors.productId}\r\n                        </Typography>\r\n                      )}\r\n                    </FormControl>\r\n                  </Grid>\r\n                  \r\n                  {selectedProduct && (\r\n                    <>\r\n                      <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                          name=\"quantity\"\r\n                          label=\"Quantity\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          type=\"number\"\r\n                          required\r\n                          value={newSaleData.quantity}\r\n                          onChange={handleNewSaleInputChange}\r\n                          error={!!newSaleErrors.quantity}\r\n                          helperText={newSaleErrors.quantity}\r\n                          InputProps={{\r\n                            inputProps: { \r\n                              min: 1, \r\n                              max: products.find(p => p._id === selectedProduct)?.quantity || 1 \r\n                            }\r\n                          }}\r\n                        />\r\n                      </Grid>\r\n                      \r\n                      <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                          label=\"Total Amount\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          value={\r\n                            formatCurrency(newSaleData.quantity * \r\n                            (products.find(p => p._id === selectedProduct)?.price || 0))\r\n                          }\r\n                          InputProps={{\r\n                            readOnly: true,\r\n                            startAdornment: <InputAdornment position=\"start\">$</InputAdornment>\r\n                          }}\r\n                        />\r\n                      </Grid>\r\n                    </>\r\n                  )}\r\n                </Grid>\r\n              </Paper>\r\n            </Grid>\r\n            \r\n            {selectedProduct && (\r\n              <>\r\n                <Grid item xs={12}>\r\n                  <Typography variant=\"subtitle1\" fontWeight=\"medium\" sx={{ mb: 2 }}>\r\n                    Customer Information\r\n                  </Typography>\r\n                  <Paper\r\n                    elevation={0}\r\n                    sx={{ \r\n                      p: 2.5, \r\n                      borderRadius: 2,\r\n                      border: '1px solid',\r\n                      borderColor: 'divider',\r\n                      bgcolor: alpha(theme.palette.background.default, 0.5)\r\n                    }}\r\n                  >\r\n                    <Grid container spacing={2}>\r\n                      <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                          name=\"customerName\"\r\n                          label=\"Customer Name\"\r\n                          placeholder=\"Optional\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          value={newSaleData.customerName}\r\n                          onChange={handleNewSaleInputChange}\r\n                        />\r\n                      </Grid>\r\n                      \r\n                      <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                          name=\"customerContact\"\r\n                          label=\"Customer Contact\"\r\n                          placeholder=\"Optional\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          value={newSaleData.customerContact}\r\n                          onChange={handleNewSaleInputChange}\r\n                        />\r\n                      </Grid>\r\n                      \r\n                      <Grid item xs={12}>\r\n                        <FormControl fullWidth variant=\"outlined\">\r\n                          <InputLabel id=\"payment-method-label\">Payment Method</InputLabel>\r\n                          <Select\r\n                            labelId=\"payment-method-label\"\r\n                            name=\"paymentMethod\"\r\n                            value={newSaleData.paymentMethod}\r\n                            onChange={handleNewSaleInputChange}\r\n                            label=\"Payment Method\"\r\n                          >\r\n                            <MenuItem value=\"Cash\">Cash</MenuItem>\r\n                            <MenuItem value=\"Credit Card\">Credit Card</MenuItem>\r\n                            <MenuItem value=\"Debit Card\">Debit Card</MenuItem>\r\n                            <MenuItem value=\"Mobile Payment\">Mobile Payment</MenuItem>\r\n                            <MenuItem value=\"Bank Transfer\">Bank Transfer</MenuItem>\r\n                          </Select>\r\n                        </FormControl>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Paper>\r\n                </Grid>\r\n                \r\n                <Grid item xs={12}>\r\n                  <Typography variant=\"subtitle1\" fontWeight=\"medium\" sx={{ mb: 2 }}>\r\n                    Additional Information\r\n                  </Typography>\r\n                  <Paper\r\n                    elevation={0}\r\n                    sx={{ \r\n                      p: 2.5, \r\n                      borderRadius: 2,\r\n                      border: '1px solid',\r\n                      borderColor: 'divider',\r\n                      bgcolor: alpha(theme.palette.background.default, 0.5)\r\n                    }}\r\n                  >\r\n                    <TextField\r\n                      name=\"notes\"\r\n                      label=\"Notes\"\r\n                      placeholder=\"Optional\"\r\n                      fullWidth\r\n                      variant=\"outlined\"\r\n                      multiline\r\n                      rows={3}\r\n                      value={newSaleData.notes}\r\n                      onChange={handleNewSaleInputChange}\r\n                    />\r\n                  </Paper>\r\n                </Grid>\r\n              </>\r\n            )}\r\n          </Grid>\r\n        </DialogContent>\r\n        \r\n        <DialogActions \r\n          sx={{ \r\n            px: 3, \r\n            py: 2.5, \r\n            borderTop: '1px solid',\r\n            borderColor: 'divider'\r\n          }}\r\n        >\r\n          <Button \r\n            onClick={handleCloseNewSaleDialog} \r\n            variant=\"outlined\"\r\n            size=\"large\"\r\n            sx={{ borderRadius: 2, px: 3 }}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button \r\n            onClick={handleCreateSale}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            disabled={submittingNewSale || !selectedProduct}\r\n            sx={{ \r\n              borderRadius: 2,\r\n              px: 3,\r\n              ml: 2\r\n            }}\r\n            startIcon={submittingNewSale ? <CircularProgress size={20} /> : <PointOfSaleIcon />}\r\n          >\r\n            {submittingNewSale ? 'Processing...' : 'Complete Sale'}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </MainLayout>\r\n  );\r\n};\r\n\r\nexport default Sales; "],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SACEC,GAAG,EAAEC,IAAI,EAAEC,UAAU,EAAEC,KAAK,EAAEC,IAAI,EAAEC,WAAW,EAC/CC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,cAAc,EAC3CC,KAAK,EAAEC,SAAS,EAAEC,SAAS,EAAEC,cAAc,EAAEC,SAAS,EACtDC,QAAQ,EAAEC,eAAe,EAAEC,IAAI,EAAEC,OAAO,EAAEC,UAAU,EACpDC,MAAM,EAAEC,WAAW,EAAEC,aAAa,EAAEC,aAAa,EACjDC,gBAAgB,EAAEC,KAAK,EAAEC,QAAQ,EACjCC,OAAO,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,UAAU,EAAEC,MAAM,QACpD,eAAe;AACtB,OAAOC,UAAU,MAAM,4BAA4B;AACnD,OAAOC,cAAc,MAAM,gCAAgC;AAC3D,OAAOC,eAAe,MAAM,iCAAiC;AAC7D,OAAOC,WAAW,MAAM,6BAA6B;AACrD,OAAOC,UAAU,MAAM,4BAA4B;AACnD,OAAOC,cAAc,MAAM,gCAAgC;AAC3D,OAAOC,OAAO,MAAM,yBAAyB;AAC7C,OAAOC,gBAAgB,MAAM,kCAAkC;AAC/D,OAAOC,WAAW,MAAM,6BAA6B;AACrD,OAAOC,iBAAiB,MAAM,mCAAmC;AACjE,OAAOC,SAAS,MAAM,2BAA2B;AACjD,OAAOC,UAAU,MAAM,oCAAoC;AAC3D,SAASC,OAAO,QAAQ,4BAA4B;AACpD,OAAOC,GAAG,MAAM,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAErC,MAAMC,KAAK,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,cAAA,EAAAC,eAAA;EAClB,MAAMC,QAAQ,GAAGxD,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEyD;EAAQ,CAAC,GAAGX,OAAO,CAAC,CAAC;EAC7B,MAAMY,KAAK,GAAG5B,QAAQ,CAAC,CAAC;;EAExB;EACA,MAAM,CAAC6B,KAAK,EAAEC,QAAQ,CAAC,GAAG9D,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAAC+D,OAAO,EAAEC,UAAU,CAAC,GAAGhE,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACiE,KAAK,EAAEC,QAAQ,CAAC,GAAGlE,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACmE,IAAI,EAAEC,OAAO,CAAC,GAAGpE,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACqE,WAAW,EAAEC,cAAc,CAAC,GAAGtE,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACuE,UAAU,EAAEC,aAAa,CAAC,GAAGxE,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACyE,cAAc,EAAEC,iBAAiB,CAAC,GAAG1E,QAAQ,CAAC,CAAC,CAAC;;EAEvD;EACA,MAAM,CAAC2E,UAAU,EAAEC,aAAa,CAAC,GAAG5E,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAAC6E,SAAS,EAAEC,YAAY,CAAC,GAAG9E,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAAC+E,OAAO,EAAEC,UAAU,CAAC,GAAGhF,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACiF,aAAa,EAAEC,gBAAgB,CAAC,GAAGlF,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACmF,WAAW,EAAEC,cAAc,CAAC,GAAGpF,QAAQ,CAAC,KAAK,CAAC;;EAErD;EACA,MAAM,CAACqF,YAAY,EAAEC,eAAe,CAAC,GAAGtF,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACuF,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGxF,QAAQ,CAAC,KAAK,CAAC;EACjE,MAAM,CAACyF,UAAU,EAAEC,aAAa,CAAC,GAAG1F,QAAQ,CAAC,KAAK,CAAC;;EAEnD;EACA,MAAM,CAAC2F,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG5F,QAAQ,CAAC,KAAK,CAAC;EACjE,MAAM,CAAC6F,QAAQ,EAAEC,WAAW,CAAC,GAAG9F,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAAC+F,eAAe,EAAEC,kBAAkB,CAAC,GAAGhG,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACiG,eAAe,EAAEC,kBAAkB,CAAC,GAAGlG,QAAQ,CAAC,EAAE,CAAC;EAC1D,MAAM,CAACmG,WAAW,EAAEC,cAAc,CAAC,GAAGpG,QAAQ,CAAC;IAC7CqG,SAAS,EAAE,EAAE;IACbC,QAAQ,EAAE,CAAC;IACXC,YAAY,EAAE,EAAE;IAChBC,eAAe,EAAE,EAAE;IACnBvB,aAAa,EAAE,MAAM;IACrBwB,KAAK,EAAE;EACT,CAAC,CAAC;EACF,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAG3G,QAAQ,CAAC,CAAC,CAAC,CAAC;EACtD,MAAM,CAAC4G,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG7G,QAAQ,CAAC,KAAK,CAAC;;EAEjE;EACA,MAAM,CAAC8G,YAAY,EAAEC,eAAe,CAAC,GAAG/G,QAAQ,CAAC;IAAEgH,IAAI,EAAE,KAAK;IAAEC,OAAO,EAAE,EAAE;IAAEC,QAAQ,EAAE;EAAU,CAAC,CAAC;;EAEnG;EACA,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGpH,QAAQ,CAAC;IAC3CqH,YAAY,EAAE,CAAC;IACf9C,UAAU,EAAE,CAAC;IACb+C,iBAAiB,EAAE;EACrB,CAAC,CAAC;;EAEF;EACArH,SAAS,CAAC,MAAM;IACdsH,UAAU,CAAC,CAAC;IACZC,eAAe,CAAC,CAAC;EACnB,CAAC,EAAE,CAAC/C,cAAc,EAAEN,IAAI,EAAEE,WAAW,EAAEM,UAAU,EAAEE,SAAS,EAAEE,OAAO,EAAEE,aAAa,CAAC,CAAC;EAEtF,MAAMsC,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MACFvD,UAAU,CAAC,IAAI,CAAC;;MAEhB;MACA,MAAMyD,MAAM,GAAG;QACbtD,IAAI;QACJuD,KAAK,EAAErD;MACT,CAAC;MAED,IAAIM,UAAU,EAAE8C,MAAM,CAACE,MAAM,GAAGhD,UAAU;MAC1C,IAAIE,SAAS,EAAE4C,MAAM,CAAC5C,SAAS,GAAGA,SAAS,CAAC+C,WAAW,CAAC,CAAC;MACzD,IAAI7C,OAAO,EAAE0C,MAAM,CAAC1C,OAAO,GAAGA,OAAO,CAAC6C,WAAW,CAAC,CAAC;MACnD,IAAI3C,aAAa,EAAEwC,MAAM,CAACxC,aAAa,GAAGA,aAAa;MAEvD,MAAM4C,QAAQ,GAAG,MAAM5E,GAAG,CAACY,KAAK,CAACiE,MAAM,CAACL,MAAM,CAAC;MAC/C3D,QAAQ,CAAC+D,QAAQ,CAACE,IAAI,CAAClE,KAAK,CAAC;MAC7BW,aAAa,CAACqD,QAAQ,CAACE,IAAI,CAACC,UAAU,IAAIH,QAAQ,CAACE,IAAI,CAAClE,KAAK,CAACoE,MAAM,CAAC;MAErEjE,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC,OAAOkE,GAAG,EAAE;MAAA,IAAAC,aAAA,EAAAC,kBAAA;MACZC,OAAO,CAACpE,KAAK,CAAC,uBAAuB,EAAEiE,GAAG,CAAC;MAC3ChE,QAAQ,CAAC,EAAAiE,aAAA,GAAAD,GAAG,CAACL,QAAQ,cAAAM,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcJ,IAAI,cAAAK,kBAAA,uBAAlBA,kBAAA,CAAoBnE,KAAK,KAAI,uBAAuB,CAAC;MAC9DD,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMwD,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI;MACF,MAAMC,MAAM,GAAG,CAAC,CAAC;MACjB,IAAI5C,SAAS,EAAE4C,MAAM,CAAC5C,SAAS,GAAGA,SAAS,CAAC+C,WAAW,CAAC,CAAC;MACzD,IAAI7C,OAAO,EAAE0C,MAAM,CAAC1C,OAAO,GAAGA,OAAO,CAAC6C,WAAW,CAAC,CAAC;MAEnDS,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEb,MAAM,CAAC;MACxD,MAAMI,QAAQ,GAAG,MAAM5E,GAAG,CAACY,KAAK,CAAC0E,QAAQ,CAACd,MAAM,CAAC;MACjDY,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAET,QAAQ,CAACE,IAAI,CAAC;;MAEvD;MACA,IAAIF,QAAQ,CAACE,IAAI,IAAIF,QAAQ,CAACE,IAAI,CAACS,KAAK,EAAE;QACxC,MAAM;UAAEjE,UAAU;UAAE8C;QAAa,CAAC,GAAGQ,QAAQ,CAACE,IAAI,CAACS,KAAK;QACxDH,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAE;UAAE/D,UAAU;UAAE8C;QAAa,CAAC,CAAC;QAE7DD,aAAa,CAAC;UACZ7C,UAAU;UACV8C,YAAY;UACZC,iBAAiB,EAAE/C,UAAU,GAAG8C,YAAY,GAAG9C,UAAU,GAAG;QAC9D,CAAC,CAAC;MACJ,CAAC,MAAM;QACL8D,OAAO,CAACpE,KAAK,CAAC,8CAA8C,CAAC;MAC/D;IACF,CAAC,CAAC,OAAOiE,GAAG,EAAE;MACZG,OAAO,CAACpE,KAAK,CAAC,kCAAkC,EAAEiE,GAAG,CAAC;IACxD;EACF,CAAC;EAED,MAAMO,gBAAgB,GAAGA,CAACC,KAAK,EAAEC,OAAO,KAAK;IAC3CvE,OAAO,CAACuE,OAAO,CAAC;EAClB,CAAC;EAED,MAAMC,uBAAuB,GAAIF,KAAK,IAAK;IACzCpE,cAAc,CAACuE,QAAQ,CAACH,KAAK,CAACI,MAAM,CAACC,KAAK,EAAE,EAAE,CAAC,CAAC;IAChD3E,OAAO,CAAC,CAAC,CAAC;EACZ,CAAC;EAED,MAAM4E,kBAAkB,GAAIC,CAAC,IAAK;IAChCrE,aAAa,CAACqE,CAAC,CAACH,MAAM,CAACC,KAAK,CAAC;IAC7B3E,OAAO,CAAC,CAAC,CAAC;EACZ,CAAC;EAED,MAAM8E,yBAAyB,GAAID,CAAC,IAAK;IACvC/D,gBAAgB,CAAC+D,CAAC,CAACH,MAAM,CAACC,KAAK,CAAC;IAChC3E,OAAO,CAAC,CAAC,CAAC;EACZ,CAAC;EAED,MAAM+E,gBAAgB,GAAGA,CAACC,IAAI,EAAEC,IAAI,KAAK;IACvC,IAAID,IAAI,KAAK,OAAO,EAAE;MACpBtE,YAAY,CAACuE,IAAI,CAAC;IACpB,CAAC,MAAM;MACLrE,UAAU,CAACqE,IAAI,CAAC;IAClB;IACAjF,OAAO,CAAC,CAAC,CAAC;EACZ,CAAC;EAED,MAAMkF,kBAAkB,GAAGA,CAAA,KAAM;IAC/B1E,aAAa,CAAC,EAAE,CAAC;IACjBE,YAAY,CAAC,IAAI,CAAC;IAClBE,UAAU,CAAC,IAAI,CAAC;IAChBE,gBAAgB,CAAC,EAAE,CAAC;IACpBd,OAAO,CAAC,CAAC,CAAC;EACZ,CAAC;EAED,MAAMmF,aAAa,GAAGA,CAAA,KAAM;IAC1B7E,iBAAiB,CAAC8E,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;IACnC;IACAhC,eAAe,CAAC,CAAC;EACnB,CAAC;EAED,MAAMiC,cAAc,GAAIC,EAAE,IAAK;IAC7BhG,QAAQ,CAAC,UAAUgG,EAAE,EAAE,CAAC;EAC1B,CAAC;EAED,MAAMC,gBAAgB,GAAID,EAAE,IAAK;IAC/BpE,eAAe,CAACoE,EAAE,CAAC;IACnBlE,oBAAoB,CAAC,IAAI,CAAC;EAC5B,CAAC;EAED,MAAMoE,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI;MACFlE,aAAa,CAAC,IAAI,CAAC;MAEnB,MAAMzC,GAAG,CAACY,KAAK,CAACgG,MAAM,CAACxE,YAAY,CAAC;MAEpC0B,eAAe,CAAC;QACdC,IAAI,EAAE,IAAI;QACVC,OAAO,EAAE,6BAA6B;QACtCC,QAAQ,EAAE;MACZ,CAAC,CAAC;;MAEF;MACAqC,aAAa,CAAC,CAAC;IAEjB,CAAC,CAAC,OAAOrB,GAAG,EAAE;MAAA,IAAA4B,cAAA,EAAAC,mBAAA;MACZ1B,OAAO,CAACpE,KAAK,CAAC,wBAAwB,EAAEiE,GAAG,CAAC;MAC5CnB,eAAe,CAAC;QACdC,IAAI,EAAE,IAAI;QACVC,OAAO,EAAE,EAAA6C,cAAA,GAAA5B,GAAG,CAACL,QAAQ,cAAAiC,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAc/B,IAAI,cAAAgC,mBAAA,uBAAlBA,mBAAA,CAAoB9F,KAAK,KAAI,uBAAuB;QAC7DiD,QAAQ,EAAE;MACZ,CAAC,CAAC;IACJ,CAAC,SAAS;MACRxB,aAAa,CAAC,KAAK,CAAC;MACpBF,oBAAoB,CAAC,KAAK,CAAC;MAC3BF,eAAe,CAAC,IAAI,CAAC;IACvB;EACF,CAAC;EAED,MAAM0E,uBAAuB,GAAGA,CAAA,KAAM;IACpCxE,oBAAoB,CAAC,KAAK,CAAC;IAC3BF,eAAe,CAAC,IAAI,CAAC;EACvB,CAAC;EAED,MAAM2E,uBAAuB,GAAGA,CAAA,KAAM;IACpClD,eAAe,CAACyC,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAExC,IAAI,EAAE;IAAM,CAAC,CAAC,CAAC;EACrD,CAAC;EAED,MAAMkD,eAAe,GAAGA,CAAA,KAAM;IAC5B;IACA;IACAC,KAAK,CAAC,8DAA8D,CAAC;EACvE,CAAC;EAED,MAAMC,UAAU,GAAIC,UAAU,IAAK;IACjC,IAAI,CAACA,UAAU,EAAE,OAAO,KAAK;IAE7B,MAAMhB,IAAI,GAAG,IAAIiB,IAAI,CAACD,UAAU,CAAC;IACjC,IAAIE,KAAK,CAAClB,IAAI,CAACmB,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,cAAc;IAEhD,OAAO,IAAIC,IAAI,CAACC,cAAc,CAAC,OAAO,EAAE;MACtCC,KAAK,EAAE,SAAS;MAChBC,GAAG,EAAE,SAAS;MACdC,IAAI,EAAE,SAAS;MACfC,IAAI,EAAE,SAAS;MACfC,MAAM,EAAE,SAAS;MACjBC,MAAM,EAAE;IACV,CAAC,CAAC,CAACC,MAAM,CAAC5B,IAAI,CAAC;EACjB,CAAC;EAED,MAAM6B,cAAc,GAAIC,MAAM,IAAK;IACjC,OAAO,IAAIV,IAAI,CAACW,YAAY,CAAC,OAAO,EAAE;MACpCC,KAAK,EAAE,UAAU;MACjBC,QAAQ,EAAE,KAAK;MACfC,qBAAqB,EAAE;IACzB,CAAC,CAAC,CAACN,MAAM,CAACE,MAAM,CAAC;EACnB,CAAC;EAED,MAAMK,cAAc,GAAIC,MAAM,IAAK;IACjC,QAAQA,MAAM;MACZ,KAAK,WAAW;QACd,OAAO,SAAS;MAClB,KAAK,WAAW;QACd,OAAO,OAAO;MAChB,KAAK,SAAS;QACZ,OAAO,SAAS;MAClB;QACE,OAAO,SAAS;IACpB;EACF,CAAC;;EAED;EACA,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACF1F,kBAAkB,CAAC,IAAI,CAAC;MACxB,MAAM6B,QAAQ,GAAG,MAAM5E,GAAG,CAAC4C,QAAQ,CAACiC,MAAM,CAAC,CAAC;MAC5C;MACA,MAAM6D,iBAAiB,GAAG9D,QAAQ,CAACE,IAAI,CAAClC,QAAQ,CAAC+F,MAAM,CAACC,OAAO,IAAIA,OAAO,CAACvF,QAAQ,GAAG,CAAC,CAAC;MACxFR,WAAW,CAAC6F,iBAAiB,CAAC;MAC9B3F,kBAAkB,CAAC,KAAK,CAAC;IAC3B,CAAC,CAAC,OAAOkC,GAAG,EAAE;MACZG,OAAO,CAACpE,KAAK,CAAC,0BAA0B,EAAEiE,GAAG,CAAC;MAC9CnB,eAAe,CAAC;QACdC,IAAI,EAAE,IAAI;QACVC,OAAO,EAAE,0BAA0B;QACnCC,QAAQ,EAAE;MACZ,CAAC,CAAC;MACFlB,kBAAkB,CAAC,KAAK,CAAC;IAC3B;EACF,CAAC;;EAED;EACA,MAAM8F,uBAAuB,GAAGA,CAAA,KAAM;IACpCJ,aAAa,CAAC,CAAC;IACf9F,oBAAoB,CAAC,IAAI,CAAC;EAC5B,CAAC;;EAED;EACA,MAAMmG,wBAAwB,GAAGA,CAAA,KAAM;IACrCnG,oBAAoB,CAAC,KAAK,CAAC;IAC3B;IACAQ,cAAc,CAAC;MACbC,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE,CAAC;MACXC,YAAY,EAAE,EAAE;MAChBC,eAAe,EAAE,EAAE;MACnBvB,aAAa,EAAE,MAAM;MACrBwB,KAAK,EAAE;IACT,CAAC,CAAC;IACFP,kBAAkB,CAAC,EAAE,CAAC;IACtBS,gBAAgB,CAAC,CAAC,CAAC,CAAC;EACtB,CAAC;;EAED;EACA,MAAMqF,wBAAwB,GAAI/C,CAAC,IAAK;IACtC,MAAM;MAAEgD,IAAI;MAAElD;IAAM,CAAC,GAAGE,CAAC,CAACH,MAAM;IAEhC,IAAImD,IAAI,KAAK,WAAW,EAAE;MACxB/F,kBAAkB,CAAC6C,KAAK,CAAC;MACzB,MAAMmD,mBAAmB,GAAGrG,QAAQ,CAACsG,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAKtD,KAAK,CAAC;MAE/D3C,cAAc,CAACoD,IAAI,KAAK;QACtB,GAAGA,IAAI;QACPnD,SAAS,EAAE0C,KAAK;QAChB;QACAzC,QAAQ,EAAE;MACZ,CAAC,CAAC,CAAC;IACL,CAAC,MAAM;MACLF,cAAc,CAACoD,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE,CAACyC,IAAI,GAAGlD;MAAM,CAAC,CAAC,CAAC;IACtD;;IAEA;IACA,IAAIrC,aAAa,CAACuF,IAAI,CAAC,EAAE;MACvBtF,gBAAgB,CAAC6C,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE,CAACyC,IAAI,GAAG;MAAG,CAAC,CAAC,CAAC;IACrD;EACF,CAAC;;EAED;EACA,MAAMK,mBAAmB,GAAGA,CAAA,KAAM;IAChC,MAAMC,MAAM,GAAG,CAAC,CAAC;IAEjB,IAAI,CAACpG,WAAW,CAACE,SAAS,EAAE;MAC1BkG,MAAM,CAAClG,SAAS,GAAG,yBAAyB;IAC9C;IAEA,IAAI,CAACF,WAAW,CAACG,QAAQ,IAAIH,WAAW,CAACG,QAAQ,IAAI,CAAC,EAAE;MACtDiG,MAAM,CAACjG,QAAQ,GAAG,iCAAiC;IACrD;;IAEA;IACA,IAAIH,WAAW,CAACE,SAAS,IAAIF,WAAW,CAACG,QAAQ,EAAE;MACjD,MAAM4F,mBAAmB,GAAGrG,QAAQ,CAACsG,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAKlG,WAAW,CAACE,SAAS,CAAC;MAC/E,IAAI6F,mBAAmB,IAAI/F,WAAW,CAACG,QAAQ,GAAG4F,mBAAmB,CAAC5F,QAAQ,EAAE;QAC9EiG,MAAM,CAACjG,QAAQ,GAAG,QAAQ4F,mBAAmB,CAAC5F,QAAQ,kBAAkB;MAC1E;IACF;IAEA,OAAOiG,MAAM;EACf,CAAC;;EAED;EACA,MAAMC,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,MAAMD,MAAM,GAAGD,mBAAmB,CAAC,CAAC;IAEpC,IAAIG,MAAM,CAACC,IAAI,CAACH,MAAM,CAAC,CAACtE,MAAM,GAAG,CAAC,EAAE;MAClCtB,gBAAgB,CAAC4F,MAAM,CAAC;MACxB;IACF;IAEA,IAAI;MACF1F,oBAAoB,CAAC,IAAI,CAAC;MAE1B,MAAM5D,GAAG,CAACY,KAAK,CAAC8I,MAAM,CAACxG,WAAW,CAAC;MAEnCY,eAAe,CAAC;QACdC,IAAI,EAAE,IAAI;QACVC,OAAO,EAAE,2BAA2B;QACpCC,QAAQ,EAAE;MACZ,CAAC,CAAC;;MAEF;MACAqC,aAAa,CAAC,CAAC;;MAEf;MACAwC,wBAAwB,CAAC,CAAC;IAE5B,CAAC,CAAC,OAAO7D,GAAG,EAAE;MAAA,IAAA0E,cAAA,EAAAC,mBAAA;MACZxE,OAAO,CAACpE,KAAK,CAAC,sBAAsB,EAAEiE,GAAG,CAAC;MAC1CnB,eAAe,CAAC;QACdC,IAAI,EAAE,IAAI;QACVC,OAAO,EAAE,EAAA2F,cAAA,GAAA1E,GAAG,CAACL,QAAQ,cAAA+E,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAc7E,IAAI,cAAA8E,mBAAA,uBAAlBA,mBAAA,CAAoB5I,KAAK,KAAI,uBAAuB;QAC7DiD,QAAQ,EAAE;MACZ,CAAC,CAAC;IACJ,CAAC,SAAS;MACRL,oBAAoB,CAAC,KAAK,CAAC;IAC7B;EACF,CAAC;EAED,oBACE1D,OAAA,CAACJ,UAAU;IAAC+J,KAAK,EAAC,OAAO;IAAAC,QAAA,gBAEvB5J,OAAA,CAAC/C,IAAI;MAAC4M,SAAS;MAACC,OAAO,EAAE,CAAE;MAACC,EAAE,EAAE;QAAEC,EAAE,EAAE;MAAE,CAAE;MAAAJ,QAAA,gBACxC5J,OAAA,CAAC/C,IAAI;QAACgN,IAAI;QAACC,EAAE,EAAE,EAAG;QAACH,EAAE,EAAE;UAAEI,OAAO,EAAE,MAAM;UAAEC,cAAc,EAAE,eAAe;UAAEC,UAAU,EAAE,QAAQ;UAAEL,EAAE,EAAE;QAAE,CAAE;QAAAJ,QAAA,gBACvG5J,OAAA,CAAC9C,UAAU;UAACoN,OAAO,EAAC,IAAI;UAACC,UAAU,EAAC,MAAM;UAAAX,QAAA,EAAC;QAAc;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eACtE3K,OAAA,CAAC9B,OAAO;UAACyL,KAAK,EAAC,eAAe;UAAAC,QAAA,eAC5B5J,OAAA,CAAC7B,UAAU;YAACyM,OAAO,EAAEvG,eAAgB;YAACwG,IAAI,EAAC,OAAO;YAAAjB,QAAA,eAChD5J,OAAA,CAACP,WAAW;cAACqL,QAAQ,EAAC;YAAO;cAAAN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtB;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eACP3K,OAAA,CAAC/C,IAAI;QAACgN,IAAI;QAACC,EAAE,EAAE,EAAG;QAACa,EAAE,EAAE,CAAE;QAAAnB,QAAA,eACvB5J,OAAA,CAAC5C,IAAI;UAAC2M,EAAE,EAAE;YAAEiB,YAAY,EAAE,CAAC;YAAEC,SAAS,EAAExK,KAAK,CAACyK,OAAO,CAAC,CAAC;UAAE,CAAE;UAAAtB,QAAA,eACzD5J,OAAA,CAAC3C,WAAW;YAAC0M,EAAE,EAAE;cAAEd,CAAC,EAAE;YAAE,CAAE;YAAAW,QAAA,eACxB5J,OAAA,CAAChD,GAAG;cAACmN,OAAO,EAAC,MAAM;cAACE,UAAU,EAAC,QAAQ;cAAAT,QAAA,gBACrC5J,OAAA,CAAChD,GAAG;gBACF+M,EAAE,EAAE;kBACFoB,OAAO,EAAEvM,KAAK,CAAC6B,KAAK,CAAC2K,OAAO,CAACC,OAAO,CAACC,IAAI,EAAE,GAAG,CAAC;kBAC/CrC,CAAC,EAAE,GAAG;kBACN+B,YAAY,EAAE,CAAC;kBACfb,OAAO,EAAE,MAAM;kBACfoB,EAAE,EAAE;gBACN,CAAE;gBAAA3B,QAAA,eAEF5J,OAAA,CAACb,eAAe;kBAACqM,KAAK,EAAC,SAAS;kBAACV,QAAQ,EAAC;gBAAO;kBAAAN,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACjD,CAAC,eACN3K,OAAA,CAAChD,GAAG;gBAAA4M,QAAA,gBACF5J,OAAA,CAAC9C,UAAU;kBAACoN,OAAO,EAAC,OAAO;kBAACkB,KAAK,EAAC,gBAAgB;kBAAA5B,QAAA,EAAC;gBAEnD;kBAAAY,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACb3K,OAAA,CAAC9C,UAAU;kBAACoN,OAAO,EAAC,IAAI;kBAACC,UAAU,EAAC,MAAM;kBAAAX,QAAA,EACvC7B,cAAc,CAAC/D,UAAU,CAACE,YAAY,IAAI,CAAC;gBAAC;kBAAAsG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACV,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACK;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAEP3K,OAAA,CAAC/C,IAAI;QAACgN,IAAI;QAACC,EAAE,EAAE,EAAG;QAACa,EAAE,EAAE,CAAE;QAAAnB,QAAA,eACvB5J,OAAA,CAAC5C,IAAI;UAAC2M,EAAE,EAAE;YAAEiB,YAAY,EAAE,CAAC;YAAEC,SAAS,EAAExK,KAAK,CAACyK,OAAO,CAAC,CAAC;UAAE,CAAE;UAAAtB,QAAA,eACzD5J,OAAA,CAAC3C,WAAW;YAAC0M,EAAE,EAAE;cAAEd,CAAC,EAAE;YAAE,CAAE;YAAAW,QAAA,eACxB5J,OAAA,CAAChD,GAAG;cAACmN,OAAO,EAAC,MAAM;cAACE,UAAU,EAAC,QAAQ;cAAAT,QAAA,gBACrC5J,OAAA,CAAChD,GAAG;gBACF+M,EAAE,EAAE;kBACFoB,OAAO,EAAEvM,KAAK,CAAC6B,KAAK,CAAC2K,OAAO,CAACK,OAAO,CAACH,IAAI,EAAE,GAAG,CAAC;kBAC/CrC,CAAC,EAAE,GAAG;kBACN+B,YAAY,EAAE,CAAC;kBACfb,OAAO,EAAE,MAAM;kBACfoB,EAAE,EAAE;gBACN,CAAE;gBAAA3B,QAAA,eAEF5J,OAAA,CAACZ,WAAW;kBAACoM,KAAK,EAAC,SAAS;kBAACV,QAAQ,EAAC;gBAAO;kBAAAN,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC7C,CAAC,eACN3K,OAAA,CAAChD,GAAG;gBAAA4M,QAAA,gBACF5J,OAAA,CAAC9C,UAAU;kBAACoN,OAAO,EAAC,OAAO;kBAACkB,KAAK,EAAC,gBAAgB;kBAAA5B,QAAA,EAAC;gBAEnD;kBAAAY,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACb3K,OAAA,CAAC9C,UAAU;kBAACoN,OAAO,EAAC,IAAI;kBAACC,UAAU,EAAC,MAAM;kBAAAX,QAAA,EACvC5F,UAAU,CAAC5C,UAAU,IAAI;gBAAC;kBAAAoJ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACjB,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACV,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACK;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAEP3K,OAAA,CAAC/C,IAAI;QAACgN,IAAI;QAACC,EAAE,EAAE,EAAG;QAACa,EAAE,EAAE,CAAE;QAAAnB,QAAA,eACvB5J,OAAA,CAAC5C,IAAI;UAAC2M,EAAE,EAAE;YAAEiB,YAAY,EAAE,CAAC;YAAEC,SAAS,EAAExK,KAAK,CAACyK,OAAO,CAAC,CAAC;UAAE,CAAE;UAAAtB,QAAA,eACzD5J,OAAA,CAAC3C,WAAW;YAAC0M,EAAE,EAAE;cAAEd,CAAC,EAAE;YAAE,CAAE;YAAAW,QAAA,eACxB5J,OAAA,CAAChD,GAAG;cAACmN,OAAO,EAAC,MAAM;cAACE,UAAU,EAAC,QAAQ;cAAAT,QAAA,gBACrC5J,OAAA,CAAChD,GAAG;gBACF+M,EAAE,EAAE;kBACFoB,OAAO,EAAEvM,KAAK,CAAC6B,KAAK,CAAC2K,OAAO,CAACM,IAAI,CAACJ,IAAI,EAAE,GAAG,CAAC;kBAC5CrC,CAAC,EAAE,GAAG;kBACN+B,YAAY,EAAE,CAAC;kBACfb,OAAO,EAAE,MAAM;kBACfoB,EAAE,EAAE;gBACN,CAAE;gBAAA3B,QAAA,eAEF5J,OAAA,CAACZ,WAAW;kBAACoM,KAAK,EAAC,MAAM;kBAACV,QAAQ,EAAC;gBAAO;kBAAAN,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1C,CAAC,eACN3K,OAAA,CAAChD,GAAG;gBAAA4M,QAAA,gBACF5J,OAAA,CAAC9C,UAAU;kBAACoN,OAAO,EAAC,OAAO;kBAACkB,KAAK,EAAC,gBAAgB;kBAAA5B,QAAA,EAAC;gBAEnD;kBAAAY,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACb3K,OAAA,CAAC9C,UAAU;kBAACoN,OAAO,EAAC,IAAI;kBAACC,UAAU,EAAC,MAAM;kBAAAX,QAAA,EACvC7B,cAAc,CAAC/D,UAAU,CAACG,iBAAiB,IAAI,CAAC;gBAAC;kBAAAqG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACxC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACV,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACK;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGP3K,OAAA,CAAChD,GAAG;MACF+M,EAAE,EAAE;QACFI,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,eAAe;QAC/BC,UAAU,EAAE,QAAQ;QACpBL,EAAE,EAAE,CAAC;QACL2B,QAAQ,EAAE,MAAM;QAChBC,GAAG,EAAE;MACP,CAAE;MAAAhC,QAAA,gBAEF5J,OAAA,CAAChD,GAAG;QAAC+M,EAAE,EAAE;UAAEI,OAAO,EAAE,MAAM;UAAEE,UAAU,EAAE,QAAQ;UAAEuB,GAAG,EAAE;QAAE,CAAE;QAAAhC,QAAA,gBACzD5J,OAAA,CAACzC,SAAS;UACRsO,WAAW,EAAC,wBAAwB;UACpCvB,OAAO,EAAC,UAAU;UAClBO,IAAI,EAAC,OAAO;UACZiB,UAAU,EAAE;YACVC,cAAc,eACZ/L,OAAA,CAACvC,cAAc;cAACuO,QAAQ,EAAC,OAAO;cAAApC,QAAA,eAC9B5J,OAAA,CAACf,UAAU;gBAAC6L,QAAQ,EAAC;cAAO;gBAAAN,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjB;UAEpB,CAAE;UACF/E,KAAK,EAAEpE,UAAW;UAClByK,QAAQ,EAAEpG,kBAAmB;UAC7BkE,EAAE,EAAE;YAAEmC,KAAK,EAAE;UAAI;QAAE;UAAA1B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpB,CAAC,eAEF3K,OAAA,CAAC1C,MAAM;UACL6O,SAAS,eAAEnM,OAAA,CAACd,cAAc;YAAAsL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UAC9BC,OAAO,EAAEA,CAAA,KAAM3I,cAAc,CAAC,CAACD,WAAW,CAAE;UAC5CsI,OAAO,EAAEtI,WAAW,GAAG,WAAW,GAAG,UAAW;UAChD6I,IAAI,EAAC,OAAO;UACZd,EAAE,EAAE;YAAEiB,YAAY,EAAE;UAAE,CAAE;UAAApB,QAAA,EAEvB5H,WAAW,GAAG,cAAc,GAAG;QAAc;UAAAwI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAEN3K,OAAA,CAAChD,GAAG;QAAC+M,EAAE,EAAE;UAAEI,OAAO,EAAE,MAAM;UAAEyB,GAAG,EAAE;QAAE,CAAE;QAAAhC,QAAA,gBACnC5J,OAAA,CAAC9B,OAAO;UAACyL,KAAK,EAAC,SAAS;UAAAC,QAAA,eACtB5J,OAAA,CAAC7B,UAAU;YAACyM,OAAO,EAAExE,aAAc;YAACyE,IAAI,EAAC,OAAO;YAAAjB,QAAA,eAC9C5J,OAAA,CAACP,WAAW;cAAA+K,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eAEV3K,OAAA,CAAC1C,MAAM;UACLgN,OAAO,EAAC,UAAU;UAClB6B,SAAS,eAAEnM,OAAA,CAACR,gBAAgB;YAAAgL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UAChCC,OAAO,EAAE7D,eAAgB;UACzBgD,EAAE,EAAE;YAAEiB,YAAY,EAAE;UAAE,CAAE;UAAApB,QAAA,EACzB;QAED;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAET3K,OAAA,CAAC1C,MAAM;UACLgN,OAAO,EAAC,WAAW;UACnB6B,SAAS,eAAEnM,OAAA,CAACT,OAAO;YAAAiL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UACvBC,OAAO,EAAEjC,uBAAwB;UACjCoB,EAAE,EAAE;YAAEiB,YAAY,EAAE;UAAE,CAAE;UAAApB,QAAA,EACzB;QAED;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAGL3I,WAAW,iBACVhC,OAAA,CAAC7C,KAAK;MACJ4M,EAAE,EAAE;QACFd,CAAC,EAAE,CAAC;QACJe,EAAE,EAAE,CAAC;QACLgB,YAAY,EAAE,CAAC;QACfC,SAAS,EAAExK,KAAK,CAACyK,OAAO,CAAC,CAAC;MAC5B,CAAE;MAAAtB,QAAA,eAEF5J,OAAA,CAAC/C,IAAI;QAAC4M,SAAS;QAACC,OAAO,EAAE,CAAE;QAACO,UAAU,EAAC,QAAQ;QAAAT,QAAA,gBAC7C5J,OAAA,CAAC/C,IAAI;UAACgN,IAAI;UAACC,EAAE,EAAE,EAAG;UAACkC,EAAE,EAAE,CAAE;UAACrB,EAAE,EAAE,CAAE;UAAAnB,QAAA,eAC9B5J,OAAA,CAACzC,SAAS;YACR8O,KAAK,EAAC,YAAY;YAClBpG,IAAI,EAAC,MAAM;YACXqG,SAAS;YACTzB,IAAI,EAAC,OAAO;YACZjF,KAAK,EAAElE,SAAS,GAAGA,SAAS,CAAC+C,WAAW,CAAC,CAAC,CAAC8H,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,EAAG;YAC9DN,QAAQ,EAAGnG,CAAC,IAAK;cACf,MAAMF,KAAK,GAAGE,CAAC,CAACH,MAAM,CAACC,KAAK;cAC5BI,gBAAgB,CAAC,OAAO,EAAEJ,KAAK,GAAG,IAAIuB,IAAI,CAACvB,KAAK,CAAC,GAAG,IAAI,CAAC;YAC3D,CAAE;YACFkG,UAAU,EAAE;cACVC,cAAc,eACZ/L,OAAA,CAACvC,cAAc;gBAACuO,QAAQ,EAAC,OAAO;gBAAApC,QAAA,eAC9B5J,OAAA,CAACN,iBAAiB;kBAACoL,QAAQ,EAAC;gBAAO;kBAAAN,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACxB;YAEpB,CAAE;YACF6B,eAAe,EAAE;cAAEC,MAAM,EAAE;YAAK;UAAE;YAAAjC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,eAEP3K,OAAA,CAAC/C,IAAI;UAACgN,IAAI;UAACC,EAAE,EAAE,EAAG;UAACkC,EAAE,EAAE,CAAE;UAACrB,EAAE,EAAE,CAAE;UAAAnB,QAAA,eAC9B5J,OAAA,CAACzC,SAAS;YACR8O,KAAK,EAAC,UAAU;YAChBpG,IAAI,EAAC,MAAM;YACXqG,SAAS;YACTzB,IAAI,EAAC,OAAO;YACZjF,KAAK,EAAEhE,OAAO,GAAGA,OAAO,CAAC6C,WAAW,CAAC,CAAC,CAAC8H,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,EAAG;YAC1DN,QAAQ,EAAGnG,CAAC,IAAK;cACf,MAAMF,KAAK,GAAGE,CAAC,CAACH,MAAM,CAACC,KAAK;cAC5BI,gBAAgB,CAAC,KAAK,EAAEJ,KAAK,GAAG,IAAIuB,IAAI,CAACvB,KAAK,CAAC,GAAG,IAAI,CAAC;YACzD,CAAE;YACFkG,UAAU,EAAE;cACVC,cAAc,eACZ/L,OAAA,CAACvC,cAAc;gBAACuO,QAAQ,EAAC,OAAO;gBAAApC,QAAA,eAC9B5J,OAAA,CAACN,iBAAiB;kBAACoL,QAAQ,EAAC;gBAAO;kBAAAN,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACxB;YAEpB,CAAE;YACF6B,eAAe,EAAE;cAAEC,MAAM,EAAE;YAAK;UAAE;YAAAjC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,eAEP3K,OAAA,CAAC/C,IAAI;UAACgN,IAAI;UAACC,EAAE,EAAE,EAAG;UAACkC,EAAE,EAAE,CAAE;UAACrB,EAAE,EAAE,CAAE;UAAAnB,QAAA,eAC9B5J,OAAA,CAACzC,SAAS;YACRmP,MAAM;YACNL,KAAK,EAAC,gBAAgB;YACtBC,SAAS;YACTzB,IAAI,EAAC,OAAO;YACZjF,KAAK,EAAE9D,aAAc;YACrBmK,QAAQ,EAAElG,yBAA0B;YAAA6D,QAAA,gBAEpC5J,OAAA,CAACxC,QAAQ;cAACoI,KAAK,EAAC,EAAE;cAAAgE,QAAA,EAAC;YAAW;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAU,CAAC,eACzC3K,OAAA,CAACxC,QAAQ;cAACoI,KAAK,EAAC,MAAM;cAAAgE,QAAA,EAAC;YAAI;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAU,CAAC,eACtC3K,OAAA,CAACxC,QAAQ;cAACoI,KAAK,EAAC,aAAa;cAAAgE,QAAA,EAAC;YAAW;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAU,CAAC,eACpD3K,OAAA,CAACxC,QAAQ;cAACoI,KAAK,EAAC,YAAY;cAAAgE,QAAA,EAAC;YAAU;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAU,CAAC,eAClD3K,OAAA,CAACxC,QAAQ;cAACoI,KAAK,EAAC,gBAAgB;cAAAgE,QAAA,EAAC;YAAc;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAU,CAAC,eAC1D3K,OAAA,CAACxC,QAAQ;cAACoI,KAAK,EAAC,eAAe;cAAAgE,QAAA,EAAC;YAAa;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAU,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/C;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACR,CAAC,eAEP3K,OAAA,CAAC/C,IAAI;UAACgN,IAAI;UAACC,EAAE,EAAE,EAAG;UAACkC,EAAE,EAAE,CAAE;UAACrB,EAAE,EAAE,CAAE;UAAChB,EAAE,EAAE;YAAEI,OAAO,EAAE,MAAM;YAAEC,cAAc,EAAE;UAAW,CAAE;UAAAR,QAAA,gBACnF5J,OAAA,CAAC1C,MAAM;YACLgN,OAAO,EAAC,UAAU;YAClBkB,KAAK,EAAC,SAAS;YACfZ,OAAO,EAAEzE,kBAAmB;YAC5B4D,EAAE,EAAE;cAAEiB,YAAY,EAAE,CAAC;cAAEO,EAAE,EAAE;YAAE,CAAE;YAAA3B,QAAA,EAChC;UAED;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACT3K,OAAA,CAAC1C,MAAM;YACLgN,OAAO,EAAC,WAAW;YACnBM,OAAO,EAAExG,UAAW;YACpB2F,EAAE,EAAE;cAAEiB,YAAY,EAAE;YAAE,CAAE;YAAApB,QAAA,EACzB;UAED;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CACR,eAGD3K,OAAA,CAAC7C,KAAK;MACJ4M,EAAE,EAAE;QACF4C,QAAQ,EAAE,QAAQ;QAClB3B,YAAY,EAAE,CAAC;QACfC,SAAS,EAAExK,KAAK,CAACyK,OAAO,CAAC,CAAC;MAC5B,CAAE;MAAAtB,QAAA,GAED9I,KAAK,iBAAId,OAAA,CAACvB,KAAK;QAACsF,QAAQ,EAAC,OAAO;QAACgG,EAAE,EAAE;UAAE6C,CAAC,EAAE;QAAE,CAAE;QAAAhD,QAAA,EAAE9I;MAAK;QAAA0J,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAE/D3K,OAAA,CAACnC,cAAc;QAAA+L,QAAA,eACb5J,OAAA,CAACtC,KAAK;UAAAkM,QAAA,gBACJ5J,OAAA,CAAClC,SAAS;YAACiM,EAAE,EAAE;cAAEoB,OAAO,EAAEvM,KAAK,CAAC6B,KAAK,CAAC2K,OAAO,CAACC,OAAO,CAACC,IAAI,EAAE,IAAI;YAAE,CAAE;YAAA1B,QAAA,eAClE5J,OAAA,CAACjC,QAAQ;cAAA6L,QAAA,gBACP5J,OAAA,CAACpC,SAAS;gBAACmM,EAAE,EAAE;kBAAEQ,UAAU,EAAE;gBAAO,CAAE;gBAAAX,QAAA,EAAC;cAAc;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eACjE3K,OAAA,CAACpC,SAAS;gBAACmM,EAAE,EAAE;kBAAEQ,UAAU,EAAE;gBAAO,CAAE;gBAAAX,QAAA,EAAC;cAAI;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eACvD3K,OAAA,CAACpC,SAAS;gBAACmM,EAAE,EAAE;kBAAEQ,UAAU,EAAE;gBAAO,CAAE;gBAAAX,QAAA,EAAC;cAAO;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eAC1D3K,OAAA,CAACpC,SAAS;gBAACmM,EAAE,EAAE;kBAAEQ,UAAU,EAAE;gBAAO,CAAE;gBAAAX,QAAA,EAAC;cAAQ;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eAC3D3K,OAAA,CAACpC,SAAS;gBAACmM,EAAE,EAAE;kBAAEQ,UAAU,EAAE;gBAAO,CAAE;gBAAAX,QAAA,EAAC;cAAc;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eACjE3K,OAAA,CAACpC,SAAS;gBAACmM,EAAE,EAAE;kBAAEQ,UAAU,EAAE;gBAAO,CAAE;gBAACsC,KAAK,EAAC,OAAO;gBAAAjD,QAAA,EAAC;cAAQ;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eACzE3K,OAAA,CAACpC,SAAS;gBAACmM,EAAE,EAAE;kBAAEQ,UAAU,EAAE;gBAAO,CAAE;gBAACsC,KAAK,EAAC,OAAO;gBAAAjD,QAAA,EAAC;cAAM;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eACvE3K,OAAA,CAACpC,SAAS;gBAACmM,EAAE,EAAE;kBAAEQ,UAAU,EAAE;gBAAO,CAAE;gBAAAX,QAAA,EAAC;cAAM;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eACzD3K,OAAA,CAACpC,SAAS;gBAACmM,EAAE,EAAE;kBAAEQ,UAAU,EAAE;gBAAO,CAAE;gBAACsC,KAAK,EAAC,QAAQ;gBAAAjD,QAAA,EAAC;cAAO;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CAAC,eACZ3K,OAAA,CAACrC,SAAS;YAAAiM,QAAA,EACPhJ,OAAO,gBACNZ,OAAA,CAACjC,QAAQ;cAAA6L,QAAA,eACP5J,OAAA,CAACpC,SAAS;gBAACkP,OAAO,EAAE,CAAE;gBAACD,KAAK,EAAC,QAAQ;gBAAC9C,EAAE,EAAE;kBAAEgD,EAAE,EAAE;gBAAE,CAAE;gBAAAnD,QAAA,eAClD5J,OAAA,CAACxB,gBAAgB;kBAACqM,IAAI,EAAE;gBAAG;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrB;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CAAC,GACTjK,KAAK,CAACoE,MAAM,KAAK,CAAC,gBACpB9E,OAAA,CAACjC,QAAQ;cAAA6L,QAAA,eACP5J,OAAA,CAACpC,SAAS;gBAACkP,OAAO,EAAE,CAAE;gBAACD,KAAK,EAAC,QAAQ;gBAAC9C,EAAE,EAAE;kBAAEgD,EAAE,EAAE;gBAAE,CAAE;gBAAAnD,QAAA,eAClD5J,OAAA,CAAC9C,UAAU;kBAACoN,OAAO,EAAC,OAAO;kBAACkB,KAAK,EAAC,gBAAgB;kBAAA5B,QAAA,EAAC;gBAEnD;kBAAAY,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CAAC,GAEXjK,KAAK,CAACsM,GAAG,CAAEC,IAAI,iBACbjN,OAAA,CAACjC,QAAQ;cAAgBmP,KAAK;cAAAtD,QAAA,gBAC5B5J,OAAA,CAACpC,SAAS;gBAAAgM,QAAA,EAAEqD,IAAI,CAACE;cAAa;gBAAA3C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eAC3C3K,OAAA,CAACpC,SAAS;gBAAAgM,QAAA,EAAE3C,UAAU,CAACgG,IAAI,CAACG,QAAQ;cAAC;gBAAA5C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eAClD3K,OAAA,CAACpC,SAAS;gBAAAgM,QAAA,EAAEqD,IAAI,CAACI;cAAW;gBAAA7C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eACzC3K,OAAA,CAACpC,SAAS;gBAAAgM,QAAA,GACPqD,IAAI,CAAC7J,YAAY,IAAI,kBAAkB,EACvC6J,IAAI,CAAC5J,eAAe,iBACnBrD,OAAA,CAAC9C,UAAU;kBAACoN,OAAO,EAAC,SAAS;kBAACH,OAAO,EAAC,OAAO;kBAACqB,KAAK,EAAC,gBAAgB;kBAAA5B,QAAA,EACjEqD,IAAI,CAAC5J;gBAAe;kBAAAmH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACX,CACb;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACQ,CAAC,eACZ3K,OAAA,CAACpC,SAAS;gBAAAgM,QAAA,EAAEqD,IAAI,CAACnL;cAAa;gBAAA0I,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eAC3C3K,OAAA,CAACpC,SAAS;gBAACiP,KAAK,EAAC,OAAO;gBAAAjD,QAAA,EAAEqD,IAAI,CAAC9J;cAAQ;gBAAAqH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eACpD3K,OAAA,CAACpC,SAAS;gBAACiP,KAAK,EAAC,OAAO;gBAAC9C,EAAE,EAAE;kBAAEQ,UAAU,EAAE;gBAAS,CAAE;gBAAAX,QAAA,EACnD7B,cAAc,CAACkF,IAAI,CAACK,WAAW;cAAC;gBAAA9C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACxB,CAAC,eACZ3K,OAAA,CAACpC,SAAS;gBAAAgM,QAAA,eACR5J,OAAA,CAAC/B,IAAI;kBACHoO,KAAK,EAAEY,IAAI,CAAC3E,MAAO;kBACnBuC,IAAI,EAAC,OAAO;kBACZW,KAAK,EAAEnD,cAAc,CAAC4E,IAAI,CAAC3E,MAAM;gBAAE;kBAAAkC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACpC;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACO,CAAC,eACZ3K,OAAA,CAACpC,SAAS;gBAACiP,KAAK,EAAC,QAAQ;gBAAAjD,QAAA,gBACvB5J,OAAA,CAAC9B,OAAO;kBAACyL,KAAK,EAAC,cAAc;kBAAAC,QAAA,eAC3B5J,OAAA,CAAC7B,UAAU;oBACT0M,IAAI,EAAC,OAAO;oBACZD,OAAO,EAAEA,CAAA,KAAMtE,cAAc,CAAC2G,IAAI,CAAC/D,GAAG,CAAE;oBACxCa,EAAE,EAAE;sBAAEwB,EAAE,EAAE;oBAAE,CAAE;oBAAA3B,QAAA,eAEd5J,OAAA,CAACV,cAAc;sBAACwL,QAAQ,EAAC;oBAAO;sBAAAN,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACzB;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC,EAETsC,IAAI,CAAC3E,MAAM,KAAK,WAAW,iBAC1BtI,OAAA,CAAC9B,OAAO;kBAACyL,KAAK,EAAC,aAAa;kBAAAC,QAAA,eAC1B5J,OAAA,CAAC7B,UAAU;oBACT0M,IAAI,EAAC,OAAO;oBACZW,KAAK,EAAC,OAAO;oBACbZ,OAAO,EAAEA,CAAA,KAAMpE,gBAAgB,CAACyG,IAAI,CAAC/D,GAAG,CAAE;oBAAAU,QAAA,eAE1C5J,OAAA,CAACX,UAAU;sBAACyL,QAAQ,EAAC;oBAAO;sBAAAN,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACrB;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CACV;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACQ,CAAC;YAAA,GA9CCsC,IAAI,CAAC/D,GAAG;cAAAsB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OA+Cb,CACX;UACF;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACP;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACM,CAAC,eAEjB3K,OAAA,CAAChC,eAAe;QACduP,kBAAkB,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAE;QACpCC,SAAS,EAAC,KAAK;QACfC,KAAK,EAAErM,UAAW;QAClBF,WAAW,EAAEA,WAAY;QACzBF,IAAI,EAAEA,IAAK;QACX0M,YAAY,EAAEpI,gBAAiB;QAC/BqI,mBAAmB,EAAElI;MAAwB;QAAA+E,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9C,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG,CAAC,eAGR3K,OAAA,CAAC5B,MAAM;MACLyF,IAAI,EAAEzB,iBAAkB;MACxBwL,OAAO,EAAE/G,uBAAwB;MACjCgH,QAAQ,EAAC,IAAI;MACbvB,SAAS;MAAA1C,QAAA,gBAET5J,OAAA,CAAC3B,WAAW;QAAAuL,QAAA,EAAC;MAEb;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAa,CAAC,eACd3K,OAAA,CAAC1B,aAAa;QAAAsL,QAAA,eACZ5J,OAAA,CAAC9C,UAAU;UAACoN,OAAO,EAAC,OAAO;UAAAV,QAAA,EAAC;QAE5B;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,eAChB3K,OAAA,CAACzB,aAAa;QAACwL,EAAE,EAAE;UAAEd,CAAC,EAAE;QAAE,CAAE;QAAAW,QAAA,gBAC1B5J,OAAA,CAAC1C,MAAM;UACLsN,OAAO,EAAE/D,uBAAwB;UACjC2E,KAAK,EAAC,SAAS;UACfsC,QAAQ,EAAExL,UAAW;UAAAsH,QAAA,EACtB;QAED;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3K,OAAA,CAAC1C,MAAM;UACLsN,OAAO,EAAEnE,iBAAkB;UAC3B+E,KAAK,EAAC,OAAO;UACblB,OAAO,EAAC,WAAW;UACnBwD,QAAQ,EAAExL,UAAW;UACrB6J,SAAS,EAAE7J,UAAU,gBAAGtC,OAAA,CAACxB,gBAAgB;YAACqM,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBAAG3K,OAAA,CAACX,UAAU;YAAAmL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UAAAf,QAAA,EAEvEtH,UAAU,GAAG,eAAe,GAAG;QAAkB;UAAAkI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5C,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC,eAGT3K,OAAA,CAACtB,QAAQ;MACPmF,IAAI,EAAEF,YAAY,CAACE,IAAK;MACxBkK,gBAAgB,EAAE,IAAK;MACvBH,OAAO,EAAE9G,uBAAwB;MACjCkH,YAAY,EAAE;QAAEC,QAAQ,EAAE,QAAQ;QAAEC,UAAU,EAAE;MAAQ,CAAE;MAAAtE,QAAA,eAE1D5J,OAAA,CAACvB,KAAK;QACJmP,OAAO,EAAE9G,uBAAwB;QACjC/C,QAAQ,EAAEJ,YAAY,CAACI,QAAS;QAChCuG,OAAO,EAAC,QAAQ;QAChBP,EAAE,EAAE;UAAEmC,KAAK,EAAE;QAAO,CAAE;QAAAtC,QAAA,EAErBjG,YAAY,CAACG;MAAO;QAAA0G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,eAGX3K,OAAA,CAAC5B,MAAM;MACLyF,IAAI,EAAErB,iBAAkB;MACxBoL,OAAO,EAAEhF,wBAAyB;MAClCiF,QAAQ,EAAC,IAAI;MACbvB,SAAS;MACT6B,UAAU,EAAE;QACVpE,EAAE,EAAE;UACFiB,YAAY,EAAE,CAAC;UACfC,SAAS,EAAExK,KAAK,CAACyK,OAAO,CAAC,CAAC;QAC5B;MACF,CAAE;MAAAtB,QAAA,gBAEF5J,OAAA,CAAC3B,WAAW;QACV0L,EAAE,EAAE;UACFqE,EAAE,EAAE,CAAC;UACLrB,EAAE,EAAE,CAAC;UACL5C,OAAO,EAAE,MAAM;UACfE,UAAU,EAAE,QAAQ;UACpBD,cAAc,EAAE,eAAe;UAC/BiE,YAAY,EAAE,WAAW;UACzBC,WAAW,EAAE;QACf,CAAE;QAAA1E,QAAA,gBAEF5J,OAAA,CAAChD,GAAG;UAACmN,OAAO,EAAC,MAAM;UAACE,UAAU,EAAC,QAAQ;UAAAT,QAAA,gBACrC5J,OAAA,CAACb,eAAe;YACd4K,EAAE,EAAE;cACFwB,EAAE,EAAE,GAAG;cACPC,KAAK,EAAE/K,KAAK,CAAC2K,OAAO,CAACC,OAAO,CAACC,IAAI;cACjCR,QAAQ,EAAE;YACZ;UAAE;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACF3K,OAAA,CAAC9C,UAAU;YAACoN,OAAO,EAAC,IAAI;YAACC,UAAU,EAAC,MAAM;YAAAX,QAAA,EAAC;UAE3C;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eACN3K,OAAA,CAAC7B,UAAU;UACTyM,OAAO,EAAEhC,wBAAyB;UAClCiC,IAAI,EAAC,OAAO;UACZ,cAAW,OAAO;UAAAjB,QAAA,eAElB5J,OAAA,CAACL,SAAS;YAACmL,QAAQ,EAAC;UAAO;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eAEd3K,OAAA,CAAC1B,aAAa;QAACyL,EAAE,EAAE;UAAEqE,EAAE,EAAE,CAAC;UAAErB,EAAE,EAAE;QAAE,CAAE;QAAAnD,QAAA,eAClC5J,OAAA,CAAC/C,IAAI;UAAC4M,SAAS;UAACC,OAAO,EAAE,CAAE;UAAAF,QAAA,gBACzB5J,OAAA,CAAC/C,IAAI;YAACgN,IAAI;YAACC,EAAE,EAAE,EAAG;YAAAN,QAAA,gBAChB5J,OAAA,CAAC9C,UAAU;cAACoN,OAAO,EAAC,WAAW;cAACC,UAAU,EAAC,QAAQ;cAACR,EAAE,EAAE;gBAAEC,EAAE,EAAE;cAAE,CAAE;cAAAJ,QAAA,EAAC;YAEnE;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eACb3K,OAAA,CAAC7C,KAAK;cACJoR,SAAS,EAAE,CAAE;cACbxE,EAAE,EAAE;gBACFd,CAAC,EAAE,CAAC;gBACJ+B,YAAY,EAAE,CAAC;gBACfwD,MAAM,EAAE,WAAW;gBACnBF,WAAW,EAAE,SAAS;gBACtBnD,OAAO,EAAEvM,KAAK,CAAC6B,KAAK,CAAC2K,OAAO,CAACqD,UAAU,CAACC,OAAO,EAAE,GAAG;cACtD,CAAE;cAAA9E,QAAA,eAEF5J,OAAA,CAAC/C,IAAI;gBAAC4M,SAAS;gBAACC,OAAO,EAAE,CAAE;gBAAAF,QAAA,gBACzB5J,OAAA,CAAC/C,IAAI;kBAACgN,IAAI;kBAACC,EAAE,EAAE,EAAG;kBAAAN,QAAA,gBAChB5J,OAAA,CAAC9C,UAAU;oBAACoN,OAAO,EAAC,OAAO;oBAACkB,KAAK,EAAC,gBAAgB;oBAACmD,YAAY;oBAAA/E,QAAA,EAAC;kBAEhE;oBAAAY,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAY,CAAC,eACb3K,OAAA,CAAClB,WAAW;oBACVwN,SAAS;oBACTxL,KAAK,EAAE,CAAC,CAACyC,aAAa,CAACL,SAAU;oBACjCoH,OAAO,EAAC,UAAU;oBAClBP,EAAE,EAAE;sBAAE6E,SAAS,EAAE;oBAAG,CAAE;oBAAAhF,QAAA,gBAEtB5J,OAAA,CAACjB,UAAU;sBAACwH,EAAE,EAAC,sBAAsB;sBAAAqD,QAAA,EAAC;oBAAc;sBAAAY,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAY,CAAC,eACjE3K,OAAA,CAAChB,MAAM;sBACL6P,OAAO,EAAC,sBAAsB;sBAC9B/F,IAAI,EAAC,WAAW;sBAChBlD,KAAK,EAAE5C,WAAW,CAACE,SAAU;sBAC7B+I,QAAQ,EAAEpD,wBAAyB;sBACnCwD,KAAK,EAAC,gBAAgB;sBACtByB,QAAQ,EAAElL,eAAgB;sBAC1BmH,EAAE,EAAE;wBACF,qBAAqB,EAAE;0BACrBgD,EAAE,EAAE,GAAG;0BACPjC,QAAQ,EAAE;wBACZ;sBACF,CAAE;sBAAAlB,QAAA,EAEDhH,eAAe,gBACd5C,OAAA,CAACxC,QAAQ;wBAACoI,KAAK,EAAC,EAAE;wBAACkI,QAAQ;wBAAAlE,QAAA,eACzB5J,OAAA,CAAChD,GAAG;0BAACmN,OAAO,EAAC,MAAM;0BAACE,UAAU,EAAC,QAAQ;0BAAAT,QAAA,gBACrC5J,OAAA,CAACxB,gBAAgB;4BAACqM,IAAI,EAAE,EAAG;4BAACd,EAAE,EAAE;8BAAEwB,EAAE,EAAE;4BAAE;0BAAE;4BAAAf,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAE,CAAC,eAC7C3K,OAAA,CAAC9C,UAAU;4BAAA0M,QAAA,EAAC;0BAAmB;4BAAAY,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAY,CAAC;wBAAA;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACzC;sBAAC;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACE,CAAC,GACTjI,QAAQ,CAACoC,MAAM,KAAK,CAAC,gBACvB9E,OAAA,CAACxC,QAAQ;wBAACoI,KAAK,EAAC,EAAE;wBAACkI,QAAQ;wBAAAlE,QAAA,eACzB5J,OAAA,CAAChD,GAAG;0BAACmN,OAAO,EAAC,MAAM;0BAACE,UAAU,EAAC,QAAQ;0BAACN,EAAE,EAAE;4BAAEgD,EAAE,EAAE;0BAAE,CAAE;0BAAAnD,QAAA,eACpD5J,OAAA,CAAC9C,UAAU;4BAACsO,KAAK,EAAC,OAAO;4BAAA5B,QAAA,EAAC;0BAAqB;4BAAAY,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAY;wBAAC;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACzD;sBAAC;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACE,CAAC,GAEXjI,QAAQ,CAACsK,GAAG,CAACtE,OAAO,iBAClB1I,OAAA,CAACxC,QAAQ;wBAAmBoI,KAAK,EAAE8C,OAAO,CAACQ,GAAI;wBAACa,EAAE,EAAE;0BAAEgD,EAAE,EAAE;wBAAI,CAAE;wBAAAnD,QAAA,eAC9D5J,OAAA,CAAChD,GAAG;0BAAA4M,QAAA,gBACF5J,OAAA,CAAC9C,UAAU;4BAACqN,UAAU,EAAC,QAAQ;4BAAAX,QAAA,EAAElB,OAAO,CAACI;0BAAI;4BAAA0B,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAa,CAAC,eAC3D3K,OAAA,CAAC9C,UAAU;4BAACoN,OAAO,EAAC,OAAO;4BAACkB,KAAK,EAAC,gBAAgB;4BAAA5B,QAAA,GAAC,UACzC,EAAClB,OAAO,CAACoG,KAAK,CAACC,OAAO,CAAC,CAAC,CAAC,EAAC,qBAAc,EAACrG,OAAO,CAACvF,QAAQ,EAAC,QACpE;0BAAA;4BAAAqH,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAY,CAAC;wBAAA;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACV;sBAAC,GANOjC,OAAO,CAACQ,GAAG;wBAAAsB,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAOhB,CACX;oBACF;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACK,CAAC,EACRpH,aAAa,CAACL,SAAS,iBACtBlD,OAAA,CAAC9C,UAAU;sBAACoN,OAAO,EAAC,SAAS;sBAACkB,KAAK,EAAC,OAAO;sBAACzB,EAAE,EAAE;wBAAEiF,EAAE,EAAE,GAAG;wBAAEC,EAAE,EAAE;sBAAI,CAAE;sBAAArF,QAAA,EAClErG,aAAa,CAACL;oBAAS;sBAAAsH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACd,CACb;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACU,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACV,CAAC,EAEN7H,eAAe,iBACd9C,OAAA,CAAAE,SAAA;kBAAA0J,QAAA,gBACE5J,OAAA,CAAC/C,IAAI;oBAACgN,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAACkC,EAAE,EAAE,CAAE;oBAAAxC,QAAA,eACvB5J,OAAA,CAACzC,SAAS;sBACRuL,IAAI,EAAC,UAAU;sBACfuD,KAAK,EAAC,UAAU;sBAChBC,SAAS;sBACThC,OAAO,EAAC,UAAU;sBAClBrE,IAAI,EAAC,QAAQ;sBACbiJ,QAAQ;sBACRtJ,KAAK,EAAE5C,WAAW,CAACG,QAAS;sBAC5B8I,QAAQ,EAAEpD,wBAAyB;sBACnC/H,KAAK,EAAE,CAAC,CAACyC,aAAa,CAACJ,QAAS;sBAChCgM,UAAU,EAAE5L,aAAa,CAACJ,QAAS;sBACnC2I,UAAU,EAAE;wBACVsD,UAAU,EAAE;0BACVC,GAAG,EAAE,CAAC;0BACNC,GAAG,EAAE,EAAAjP,cAAA,GAAAqC,QAAQ,CAACsG,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAKpG,eAAe,CAAC,cAAAzC,cAAA,uBAA7CA,cAAA,CAA+C8C,QAAQ,KAAI;wBAClE;sBACF;oBAAE;sBAAAqH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACH;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC,eAEP3K,OAAA,CAAC/C,IAAI;oBAACgN,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAACkC,EAAE,EAAE,CAAE;oBAAAxC,QAAA,eACvB5J,OAAA,CAACzC,SAAS;sBACR8O,KAAK,EAAC,cAAc;sBACpBC,SAAS;sBACThC,OAAO,EAAC,UAAU;sBAClB1E,KAAK,EACHmC,cAAc,CAAC/E,WAAW,CAACG,QAAQ,IAClC,EAAA7C,eAAA,GAAAoC,QAAQ,CAACsG,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAKpG,eAAe,CAAC,cAAAxC,eAAA,uBAA7CA,eAAA,CAA+CwO,KAAK,KAAI,CAAC,CAAC,CAC5D;sBACDhD,UAAU,EAAE;wBACVyD,QAAQ,EAAE,IAAI;wBACdxD,cAAc,eAAE/L,OAAA,CAACvC,cAAc;0BAACuO,QAAQ,EAAC,OAAO;0BAAApC,QAAA,EAAC;wBAAC;0BAAAY,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAgB;sBACpE;oBAAE;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACH;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC;gBAAA,eACP,CACH;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACG;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACF,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,EAEN7H,eAAe,iBACd9C,OAAA,CAAAE,SAAA;YAAA0J,QAAA,gBACE5J,OAAA,CAAC/C,IAAI;cAACgN,IAAI;cAACC,EAAE,EAAE,EAAG;cAAAN,QAAA,gBAChB5J,OAAA,CAAC9C,UAAU;gBAACoN,OAAO,EAAC,WAAW;gBAACC,UAAU,EAAC,QAAQ;gBAACR,EAAE,EAAE;kBAAEC,EAAE,EAAE;gBAAE,CAAE;gBAAAJ,QAAA,EAAC;cAEnE;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eACb3K,OAAA,CAAC7C,KAAK;gBACJoR,SAAS,EAAE,CAAE;gBACbxE,EAAE,EAAE;kBACFd,CAAC,EAAE,GAAG;kBACN+B,YAAY,EAAE,CAAC;kBACfwD,MAAM,EAAE,WAAW;kBACnBF,WAAW,EAAE,SAAS;kBACtBnD,OAAO,EAAEvM,KAAK,CAAC6B,KAAK,CAAC2K,OAAO,CAACqD,UAAU,CAACC,OAAO,EAAE,GAAG;gBACtD,CAAE;gBAAA9E,QAAA,eAEF5J,OAAA,CAAC/C,IAAI;kBAAC4M,SAAS;kBAACC,OAAO,EAAE,CAAE;kBAAAF,QAAA,gBACzB5J,OAAA,CAAC/C,IAAI;oBAACgN,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAACkC,EAAE,EAAE,CAAE;oBAAAxC,QAAA,eACvB5J,OAAA,CAACzC,SAAS;sBACRuL,IAAI,EAAC,cAAc;sBACnBuD,KAAK,EAAC,eAAe;sBACrBR,WAAW,EAAC,UAAU;sBACtBS,SAAS;sBACThC,OAAO,EAAC,UAAU;sBAClB1E,KAAK,EAAE5C,WAAW,CAACI,YAAa;sBAChC6I,QAAQ,EAAEpD;oBAAyB;sBAAA2B,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACpC;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC,eAEP3K,OAAA,CAAC/C,IAAI;oBAACgN,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAACkC,EAAE,EAAE,CAAE;oBAAAxC,QAAA,eACvB5J,OAAA,CAACzC,SAAS;sBACRuL,IAAI,EAAC,iBAAiB;sBACtBuD,KAAK,EAAC,kBAAkB;sBACxBR,WAAW,EAAC,UAAU;sBACtBS,SAAS;sBACThC,OAAO,EAAC,UAAU;sBAClB1E,KAAK,EAAE5C,WAAW,CAACK,eAAgB;sBACnC4I,QAAQ,EAAEpD;oBAAyB;sBAAA2B,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACpC;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC,eAEP3K,OAAA,CAAC/C,IAAI;oBAACgN,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAAAN,QAAA,eAChB5J,OAAA,CAAClB,WAAW;sBAACwN,SAAS;sBAAChC,OAAO,EAAC,UAAU;sBAAAV,QAAA,gBACvC5J,OAAA,CAACjB,UAAU;wBAACwH,EAAE,EAAC,sBAAsB;wBAAAqD,QAAA,EAAC;sBAAc;wBAAAY,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAY,CAAC,eACjE3K,OAAA,CAAChB,MAAM;wBACL6P,OAAO,EAAC,sBAAsB;wBAC9B/F,IAAI,EAAC,eAAe;wBACpBlD,KAAK,EAAE5C,WAAW,CAAClB,aAAc;wBACjCmK,QAAQ,EAAEpD,wBAAyB;wBACnCwD,KAAK,EAAC,gBAAgB;wBAAAzC,QAAA,gBAEtB5J,OAAA,CAACxC,QAAQ;0BAACoI,KAAK,EAAC,MAAM;0BAAAgE,QAAA,EAAC;wBAAI;0BAAAY,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAU,CAAC,eACtC3K,OAAA,CAACxC,QAAQ;0BAACoI,KAAK,EAAC,aAAa;0BAAAgE,QAAA,EAAC;wBAAW;0BAAAY,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAU,CAAC,eACpD3K,OAAA,CAACxC,QAAQ;0BAACoI,KAAK,EAAC,YAAY;0BAAAgE,QAAA,EAAC;wBAAU;0BAAAY,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAU,CAAC,eAClD3K,OAAA,CAACxC,QAAQ;0BAACoI,KAAK,EAAC,gBAAgB;0BAAAgE,QAAA,EAAC;wBAAc;0BAAAY,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAU,CAAC,eAC1D3K,OAAA,CAACxC,QAAQ;0BAACoI,KAAK,EAAC,eAAe;0BAAAgE,QAAA,EAAC;wBAAa;0BAAAY,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAU,CAAC;sBAAA;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAClD,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACV,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACF,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CAAC,eAEP3K,OAAA,CAAC/C,IAAI;cAACgN,IAAI;cAACC,EAAE,EAAE,EAAG;cAAAN,QAAA,gBAChB5J,OAAA,CAAC9C,UAAU;gBAACoN,OAAO,EAAC,WAAW;gBAACC,UAAU,EAAC,QAAQ;gBAACR,EAAE,EAAE;kBAAEC,EAAE,EAAE;gBAAE,CAAE;gBAAAJ,QAAA,EAAC;cAEnE;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eACb3K,OAAA,CAAC7C,KAAK;gBACJoR,SAAS,EAAE,CAAE;gBACbxE,EAAE,EAAE;kBACFd,CAAC,EAAE,GAAG;kBACN+B,YAAY,EAAE,CAAC;kBACfwD,MAAM,EAAE,WAAW;kBACnBF,WAAW,EAAE,SAAS;kBACtBnD,OAAO,EAAEvM,KAAK,CAAC6B,KAAK,CAAC2K,OAAO,CAACqD,UAAU,CAACC,OAAO,EAAE,GAAG;gBACtD,CAAE;gBAAA9E,QAAA,eAEF5J,OAAA,CAACzC,SAAS;kBACRuL,IAAI,EAAC,OAAO;kBACZuD,KAAK,EAAC,OAAO;kBACbR,WAAW,EAAC,UAAU;kBACtBS,SAAS;kBACThC,OAAO,EAAC,UAAU;kBAClBkF,SAAS;kBACTC,IAAI,EAAE,CAAE;kBACR7J,KAAK,EAAE5C,WAAW,CAACM,KAAM;kBACzB2I,QAAQ,EAAEpD;gBAAyB;kBAAA2B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACpC;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CAAC;UAAA,eACP,CACH;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACM,CAAC,eAEhB3K,OAAA,CAACzB,aAAa;QACZwL,EAAE,EAAE;UACFqE,EAAE,EAAE,CAAC;UACLrB,EAAE,EAAE,GAAG;UACP2C,SAAS,EAAE,WAAW;UACtBpB,WAAW,EAAE;QACf,CAAE;QAAA1E,QAAA,gBAEF5J,OAAA,CAAC1C,MAAM;UACLsN,OAAO,EAAEhC,wBAAyB;UAClC0B,OAAO,EAAC,UAAU;UAClBO,IAAI,EAAC,OAAO;UACZd,EAAE,EAAE;YAAEiB,YAAY,EAAE,CAAC;YAAEoD,EAAE,EAAE;UAAE,CAAE;UAAAxE,QAAA,EAChC;QAED;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3K,OAAA,CAAC1C,MAAM;UACLsN,OAAO,EAAEvB,gBAAiB;UAC1BiB,OAAO,EAAC,WAAW;UACnBkB,KAAK,EAAC,SAAS;UACfX,IAAI,EAAC,OAAO;UACZiD,QAAQ,EAAErK,iBAAiB,IAAI,CAACX,eAAgB;UAChDiH,EAAE,EAAE;YACFiB,YAAY,EAAE,CAAC;YACfoD,EAAE,EAAE,CAAC;YACLa,EAAE,EAAE;UACN,CAAE;UACF9C,SAAS,EAAE1I,iBAAiB,gBAAGzD,OAAA,CAACxB,gBAAgB;YAACqM,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBAAG3K,OAAA,CAACb,eAAe;YAAAqL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UAAAf,QAAA,EAEnFnG,iBAAiB,GAAG,eAAe,GAAG;QAAe;UAAA+G,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEjB,CAAC;AAACvK,EAAA,CA3jCID,KAAK;EAAA,QACQpD,WAAW,EACR8C,OAAO,EACbhB,QAAQ;AAAA;AAAA8Q,EAAA,GAHlBxP,KAAK;AA6jCX,eAAeA,KAAK;AAAC,IAAAwP,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}